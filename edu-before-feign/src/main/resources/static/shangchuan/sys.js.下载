/*!
 * @project : huya3.1
 * @version : 3.4.1
 * @author  : RC.xxx
 * @update  : 2018-10-15 4:07:39 pm
 */!function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var i={};return t.m=e,t.c=i,t.p="./js/",t(0)}([function(e,t){seajs.config({paths:{js:"http://vhuya-static.huya.com/huya-assets/3.4.1/assets/"},alias:{udb:"http://vhuya-static.huya.com/common/js/dwudbproxy.js",placeholder:"js/plugins/jquery.placeholder.min.js",dropdown:"js/plugins/dropDown.js",charts:"js/plugins/highcharts.js",datepick:"js/plugins/jquery.datepick.min.js",plugin:"js/plugins/jquery.plugin.min.js",form:"js/plugins/jquery.form.js",subscribe:"js/deps/subscribe.js",aside:"js/deps/aside.js",header:"http://vhuya-static.huya.com/huya-assets/4.3.0/static/common/js/header-new.js",pinyinDict:"js/plugins/pinyin_dict_notone.js",pinyinUtil:"js/plugins/pinyinUtil.js"}}).use("$",function($){function e(){var e=0;$("#sel-all").on("click",function(){$(this)[0].checked?($(".video-check").each(function(){this.checked=!0}),e=6):($(".video-check").each(function(){this.checked=!1}),e=0)}),$(".video-check").on("click",function(){$(this)[0].checked?(++e,console.log(e),6==e&&$("#sel-all").attr("checked","checked")):(--e,console.log(e),6!=e&&$("#sel-all").removeAttr("checked"))}),$(".delete").on("click",function(){$("#delete-notice").show();var e=[];$("video-check:checked").each(function(){e.push($(this).data("vid"))}),t(e)}),$(".single-delete").on("click",function(){$("#delete-notice").show();var e=[];e.push($(this).parent().siblings(".video-check").data("vid")),t(e)})}function t(e){$(".delVideo").on("click",function(){1==$(this).data("del")?$.ajax({}):$("#delete-notice").hide()})}window.jQuery=window.$=$,function(e){var t=function(){};t.prototype.getCookie=function(e){var t=null,i=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var o=(n[a]||"").replace(i,"");if(o.substring(0,e.length+1)===e+"="){t=decodeURIComponent(o.substring(e.length+1));break}}return t},t.prototype.setCookie=function(t,i,n){var a=new Date;a.setTime(+a+864e5*n),e.ActiveXObject?document.cookie=t+"="+i+(null==n?"":";expires="+a.toGMTString())+";path=/":document.cookie=t+"="+i+(null==n?"":";expires="+a.toUTCString())+";path=/"},t.prototype.clearCookie=function(e){this.set(e,"",-1)},t.prototype.getUrlParams=function(t){var i=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),n=e.location.search.substr(1).match(i);return null!=n?decodeURIComponent(n[2]):null},t.prototype.tabInit=function(e,t){var i={wrap:".tab-col",btn_wrap:'[data-role="tab-btn"]',btn:".tab-btn",cont_wrap:'[data-role="tab-cont"]',cont:".tab-cont",currentClass:"cur"};$.extend(i,e),$(i.wrap).each(function(){var e=$(this);e.on("mouseover",i.btn_wrap+" "+i.btn,function(n){var a=$(this).index();$(this).addClass(i.currentClass).siblings().removeClass(i.currentClass),e.find(i.cont_wrap+" "+i.cont).eq(a).show().siblings(i.cont).hide(),t&&t&t(a),n.preventDefault()})})},e.commonApi=new t}(window,document),commonApi.tabInit(),seajs.use("header"),window.dystat=function(e){if("undefined"==typeof YA)return!1;var e=e||{},t={pro:"huyasp",pas:YA.cookie.get("username")||"",yyuid:YA.cookie.get("yyuid")||"",pageType:"root",rso:"",rso_desc:"",eid:"",eid_desc:"",vid:$("body").attr("vid")||""};for(var i in e)t[i]=e[i];"undefined"==typeof ya&&(window.ya=new YA(t.pro,t.pas,{pageType:t.pageType,yyuid:t.yyuid,vid:t.vid}),ya.reportProductStartUp({pro:t.pro,rso:t.rso,rso_desc:t.rso_desc,vid:t.vid}),ya.startProductHeartbeat({pro:t.pro,rso:t.rso,rso_desc:t.rso_desc,vid:t.vid}),ya.reportProductEvent({eid:t.eid,eid_desc:t.eid_desc,rso:t.rso,rso_desc:t.rso_desc,vid:t.vid}),$("body").on("click",".statpid",function(e){ya.reportProductEvent({eid:$(this).attr("s_data").split("|")[0],eid_desc:$(this).attr("s_data").split("|")[1]})}))},$("body").attr("login-pas")?dystat({rso:commonApi.getUrlParams("rso")||commonApi.getUrlParams("dsfrom")||commonApi.getUrlParams("from")||"",rso_desc:commonApi.getUrlParams("rso_desc")||"",eid:$("body").attr("eid")||"hysp/home/pv/web",eid_desc:$("body").attr("eid_desc")||"视频/主站/浏览次数/web"}):dystat({rso:commonApi.getUrlParams("rso")||commonApi.getUrlParams("dsfrom")||commonApi.getUrlParams("from")||"",rso_desc:commonApi.getUrlParams("rso_desc")||"",eid:"",eid_desc:""});var i=$("#gotop"),n=$("body,html"),a=!1;$(window).on("scroll",function(){var e=$(window).scrollTop(),t=$(document).height()/5;e>t&&!a?(i.stop().css("opacity",1),a=!0):e<=t&&a&&(i.stop().css("opacity",0),a=!1),e>=418?$("aside").removeClass("aside-pos"):$("aside").addClass("aside-pos"),e>0?$(".main-header").addClass("header-fixed"):$(".main-header").removeClass("header-fixed")}),i.on("click",function(){var e=$(window).scrollTop();n.stop().animate({scrollTop:0},300+(e-36)/20,"linear",function(){$(window).trigger("scroll")})});var o={baseUrl:"/?r=subscribe/",isSubscribe:function(e,t){$.getJSON("//api.huya.com/subscribe/getSubscribeStatus?callback=?",{from_key:commonApi.getCookie("yyuid"),from_type:1,to_key:e,to_type:2,_:+new Date}).done(function(e){t(0===e.result?null:new Error("error"),1===e.status)})},subscribe:function(e,t){$.getJSON("//www.huya.com/member/index.php?callback=?",{m:"Activity","do":"jsonpSubU",from:"act",uid:e,type:"Subscribe",_:+new Date}).done(function(e){t(1===e.status)})},unSubscribe:function(e,t){$.getJSON("//www.huya.com/member/index.php?callback=?",{m:"Activity","do":"jsonpSubU",from:"act",uid:e,type:"Cancel",_:+new Date}).done(function(e){t(3===e.status)})},renderUserCallback:function(){var e=this;$("[data-js=subscribe]").each(function(){var t=this;e.isSubscribe($(this).data("uid"),function(i,n){e.subscribeRender($(t),n)})})},subscribeRender:function(e,t){var i=["<i></i>订阅","<i></i>已订阅<em>取消订阅</em>"];(e.hasClass("play-book")||e.hasClass("btn-book-channel")||e.hasClass("hy-book")||e.hasClass("hp-book")||e.hasClass("btn-book-search"))&&(t?(e.html(i[1]),e.addClass("btn-book-done")):(e.html(i[0]),e.removeClass("btn-book-done")))},binEvent:function(){var e=this;$("[data-js=subscribe]").on("click",function(t){t.preventDefault();var i=$(this);TT.sudo(function(){var t=i.data("uid");e.isSubscribe(t,function(n,a){a?e.unSubscribe(t,function(t){t&&e.subscribeRender(i,!a)}):e.subscribe(t,function(t){t&&e.subscribeRender(i,!a)})})})})},init:function(){this.binEvent(),this.renderUserCallback()}};o.init();var s=$("body"),r=s.hasClass("g-narrow");$(window).on("resize",function(){var e=$(window).width();e<1220&&!r?($(window).trigger("resize:narrow"),r=!0):e>=1220&&r&&($(window).trigger("resize:wide"),r=!1)}),$(window).on("resize:narrow",function(){s.addClass("g-narrow")}).on("resize:wide",function(){s.removeClass("g-narrow")}),$(window).trigger("resize"),$(document).on("click",'a[href="javascript:"]',function(){return!1});var c=function(){var e,t=function(e,t){return""!==e?e+t.slice(0,1).toUpperCase()+t.slice(1):t},i=function(){var i=!1;return"number"==typeof window.screenX&&["webkit","moz","ms","o",""].forEach(function(n){0==i&&void 0!=document[t(n,"hidden")]&&(e=n,i=!0)}),i}(),n=function(){if(i)return document[t(e,"hidden")]},a=function(){if(i)return document[t(e,"visibilityState")]};return{hidden:n(),visibilityState:a(),visibilitychange:function(t,o){if(o=o||!1,i&&"function"==typeof t)return $(document).one("visibilitychange:once",t),document.addEventListener(e+"visibilitychange",function(e){this.hidden=n(),this.visibilityState=a(),t.call(this,e)}.bind(this),o)}}}();!function(){if(c.visibilityState){var e=document.title,t=$("title").attr("leave");t=t?t:e,c.visibilitychange(function(){document.title=c.hidden?t:e})}}(),$(".m-box-more").length>0&&$(".m-box-more").on("click",function(){$(this).hasClass("m-more-up")?($(this).toggleClass("m-more-up"),$(this).parent().find(".m-box-p").css({display:"block"}),$(this).parent().find(".m-box-p1").hide()):($(this).toggleClass("m-more-up"),$(this).parent().find(".m-box-p").css({display:"none"}),$(this).parent().find(".m-box-p1").show())}),$(".date-picker").length>0&&seajs.use(["plugin","datepick"],function(){$(".date-picker").datepick({dateFormat:"yyyymmdd"})}),$(".chart-area").length>0&&seajs.use(["dropdown","charts"],function(e,t){function i(e){return e instanceof i?e:void(this.dataHost="http://v.huya.com")}i.prototype={init:function(){var t=this,i=$("#dateSelect .cur_list_item").attr("date")||"";t.dateSelectDrop=new e({wrapper:$("#dateSelect")}),t.dateSelectDrop2=new e({wrapper:$("#dateSelect2")}),t.bindEvents(i)},formatDate:function(e){e=e?new Date(parseInt(e)):new Date;var t=e.getFullYear(),i=e.getMonth()+1,n=e.getDate(),a=e.getHours(),o=e.getMinutes(),s=e.getSeconds();return 1===(i+"").length&&(i="0"+i),1===(n+"").length&&(n="0"+n),1===(a+"").length&&(a="0"+a),1===(o+"").length&&(o="0"+o),1===(s+"").length&&(s="0"+s),{year:t,month:i,day:n,hour:a,minute:o,second:s}},getChartsData:function(e,t,i,n,a,o){var s=this,r=s.dataHost+"/jsapi/getPodcastProfit?index=date",c=(new Date).getTime(),d=!0,l,u,h,p,m={};p=s.formatDate(),"0"==e?(d=!1,u=s.formatDate(c-864e5),l=""+u.year+u.month+u.day,h=""+p.year+p.month+p.day,m.start=l,m.end=h,s.getJsonp(r,m,d,i,n)):"1"==e?(d=!1,u=s.formatDate(c-5184e5),l=""+u.year+u.month+u.day,h=""+p.year+p.month+p.day,m.start=l,m.end=h,s.getJsonp(r,m,d,i,n)):"2"==e?(d=!0,u=s.formatDate(c-2592e6),l=""+u.year+u.month+u.day,h=""+p.year+p.month+p.day,m.start=l,m.end=h,s.getJsonp(r,m,d,i,n)):(m.start=a,m.end=o,s.getJsonp(r,m,d,i,n))},drawCharts:function(e,t,i,n){var a=[],o=[],s=[];$.each(e.list,function(e,t){a[a.length]=e.substr(4,2)+"-"+e.substr(6,2),o[o.length]=t.play,s[s.length]=t.money}),$("#js-charts").highcharts({chart:{type:"area",width:780,height:432,spacingTop:66,backgroundColor:"none"},title:{text:""},credits:{enabled:!1},legend:{layout:"horizontal",align:"left",verticalAlign:"top",floating:"true",x:0,y:-60,style:{background:"rgba(255,255,255,0.5)",filter:"progid:DXImageTransform.Microsoft.gradient(startcolorstr=#7F000000,endcolorstr=#7F000000)"},itemStyle:{cursor:"pointer",color:"#666",fontWeight:"300",fontSize:"14px"},symbolHeight:14,symbolWidth:14},xAxis:{labels:{enabled:!0,y:30,maxStaggerLines:1,step:t?~~(a.length/7):1,style:{fontSize:"12px",color:"#333333"}},categories:a,lineWidth:0,tickWidth:0},yAxis:[{labels:{enabled:!0},title:{text:""},gridLineDashStyle:"ShortDash",min:0},{labels:{enabled:!0,formatter:function(){return"￥ "+this.value}},title:{text:""},gridLineDashStyle:"ShortDash",min:0,opposite:!0}],tooltip:{shared:!0,valueSuffix:""},plotOptions:{area:{fillOpacity:.1},series:{lineWidth:2,marker:{enabled:!1,symbol:"circle",states:{hover:{enabled:!0,radius:3,lineWidth:0,lineColor:null}}}}},series:[{name:"视频播放数",data:o,yAxis:0,color:"#56a4ff"},{name:"分成收益（元）",data:s,yAxis:1,color:"#f69a0d"}]});var r=$("#js-charts").highcharts();i?r.series[0].show():r.series[0].hide(),n?r.series[1].show():r.series[1].hide()},isEmptyObj:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},getJsonp:function(e,t,i,n,a){var o=this;o.ajaxJsonp({url:e,data:t,beforeSend:function(){$("#loading-img").css({display:"block"})},success:function(e){$("#loading-img").hide(),e&&o.drawCharts(e,i,n,a)}})},ajaxJsonp:function(e){try{$.ajax({type:e.type||"get",url:e.url||"",data:e.data||"",jsonp:e.jsonp||"callback",dataType:e.dataType||"jsonp",cache:e.cache||!1,timeout:e.timeout||1e5,success:function(t){e.success&&e.success(t)},error:function(){e.error&&e.error()},beforeSend:function(){e.beforeSend&&e.beforeSend()}})}catch(t){throw"no jQuery object!"}},bindEvents:function(e,t){var i=this,n,a,o,s,r;s=$("#date-start").val(),r=$("#date-end").val(),e&&i.dateSelectDrop.$item.click(function(){e=$(this).attr("date"),n=$("#play-num").get(0).checked,a=$("#play-cash").get(0).checked,i.getChartsData(e,t,n,a)}),s&&r?i.getChartsData("3",0,!0,!0):i.getChartsData("1",0,!0,!0),$(".revenue-checkbox").on("click",function(){e=$("#dateSelect").find("cur_list_item").attr("date"),n=$("#play-num").get(0).checked,a=$("#play-cash").get(0).checked,o=$("#js-charts").highcharts(),n?o.series[0].show():o.series[0].hide(),a?o.series[1].show():o.series[1].hide()}),$("#date-query").on("click",function(){e=$("#dateSelect").length>0?$("#dateSelect").find("cur_list_item").attr("date"):3,n=$("#play-num").get(0).checked,a=$("#play-cash").get(0).checked,s=$("#date-start").val(),r=$("#date-end").val(),r>s?i.getChartsData(e,0,n,a,s,r):alert("请选择正确的日期区间")})}};var n=new i;n.init()}),$(".help-mark").length>0&&(e(),$(".help-mark").hover(function(){$(this).find(".hover").show(),$(this).children(".help").show()},function(){$(this).find(".hover").hide(),$(this).children(".help").hide()}),$(".stopper").on("click",function(){$(".stop-notice").show()}),$(".stop-confirm").on("click",function(){1==$(this).data("stop")?$(".stop-notice").hide():$(".stop-notice").hide()})),$("#video-block").find(".video-list li").length>6&&$("#video-block").find(".video-list").css({height:"370px",overflow:"hidden","overflow-y":"scroll","margin-right":"0"}),($("body").hasClass("upload-page")||$("body").hasClass("edit-video-info"))&&seajs.use("form");var d=$("#video_tags"),l=d.find(".u-tag").length,u=d.closest(".video-info--uploading__item").find(".input-txt-note em");u.text(10-l),d.on("click",function(){$(this).find(".tag-input").focus(),$(".u-suggest").hide()}),d.on("click",".u-tag",function(){$(this).remove(),l=d.find(".u-tag").length,l<10&&u.removeClass("alert-num"),u.text(10-d.find(".u-tag").length),(d.find(".u-tag").length=0)&&$("#tags_empty_alert").show()}),d.find(".u-tag").length>0&&10==d.find(".u-tag").length&&u.addClass("alert-num"),d.find(".tag-input").on({keyup:function(e){var t=e||window.e,i=$(this),n,a=!0;if(13==t.keyCode){if(n=$.trim(i.prop("value").replace(/#/g,"")),""!=n){if(!(d.find(".u-tag").length<10))return void alert("已超过10个标签");if($(".u-tag").each(function(){$(this).text().replace(/#/g,"")==n&&(a=!1)}),n.length>20)return void alert("标签字数超过20字，请重新输入！");a?(i.before('<a class="u-tag">#'+n+"</a>"),10==d.find(".u-tag").length&&u.addClass("alert-num"),u.text(10-d.find(".u-tag").length)):alert("已存在标签")}else alert("请输入标签");i.val("")}},keydown:function(e){$("#tags_empty_alert").hide();var t=e||window.e,i=$(this);8==t.keyCode&&0==i.val().length&&(d.find(".u-tag").last().remove(),u.text(10-d.find(".u-tag").length),10==d.find(".u-tag").length?u.addClass("alert-num"):(u.removeClass("alert-num"),0==d.find(".u-tag").length&&($("#tags_empty_alert").show(),$(".u-suggest").show())))}}),$(".tag-recommend").on("click","a",function(){var e=$.trim($(this).text().replace(/#/g,"")),t=!0;$(".record-textarea,.u-textarea").find(".u-tag").each(function(){$(this).text().replace(/#/g,"")==e&&(t=!1)}),t&&($(".u-suggest").hide(),$("#tags_empty_alert").hide(),$(".record-textarea .tag-input,.u-textarea .tag-input").before('<a class="u-tag">#'+e+"</a>"),$(".input-txt-note").find("em").text(10-$(".u-tag").length),$(".tag-input").focus())}),$(".checkbox-tag-others").parent().on("mouseenter",function(e){e.preventDefault(),$(this).addClass("checkbox-tag-others-on")}),$(".checkbox-tag-others").parent().on("mouseleave",function(e){e.preventDefault(),$(this).removeClass("checkbox-tag-others-on")}),$(".others-tag-cont").find("li").on("click",function(){var e=$(this).text(),t=$(this).attr("value");$(".checkbox-tag-others span").text(e),$(".checkbox-tag-others").attr("value",t).addClass("checkbox-checked"),$(".u-input-checkbox-wrap input").attr("checked",!1),$(".checkbox-tag-others").parent().removeClass("checkbox-tag-others-on")}),$(".u-input-checkbox-wrap input").on("focus",function(){$(".checkbox-tag-others").removeClass("checkbox-checked")}),$("#record-tip-bg").on("click",function(){$(this).hide(),commonApi.setCookie("record-tip",1)}),commonApi.getCookie("record-tip")||$("#record-tip-bg").show(),$("body").on("click",".mzy .J_cancel",function(){$(this).parents(".mzy-sys-subcard").addClass("sub").removeClass("cancel")}).on("click",".mzy .J_sub",function(){$(this).parents(".mzy-sys-subcard").addClass("cancel").removeClass("sub")}).on("click",".mzy .J_mailPushCheckbox",function(){$(this).toggleClass("checked")}).on("click",".mzy .J_mailPushModify",function(){$(this).hide(),$(".mzy .J_mailPushInput").removeAttr("readonly").addClass("active"),$(".mzy .J_mailPushSave").show()}).on("click",".mzy .J_mailPushSave",function(){$(this).hide(),$(".mzy .J_mailPushInput").attr("readonly","readonly").removeClass("active"),$(".mzy .J_mailPushModify").show()}),function(){function e(e){return!u||$(e).find("[c_set_id]").attr("c_set_id")===u}function t(e){var t=$(e).data("pinyin"),i=$(e).data("py");return!t||(0===t.toLowerCase().indexOf(h.toLowerCase())||0===i.toLowerCase().indexOf(h.toLowerCase())||$(e).text().toLowerCase().indexOf(h.toLowerCase())>=0)}function i(){var i=0,n=c*l,a=(c+1)*l;if(p.each(function(o,s){e(s)&&t(s)?(i+=1,i>n&&i<=a?$(s).show():$(s).hide()):$(s).hide()}),i<=0)f.show(),g.hide(),y.css("visibility","hidden");else{f.hide(),g.show(),y.css("visibility","visible"),d=Math.ceil(i/l),$(".mzy-footer .num").parent().remove();var o=$(".mzy-footer .mzy-footer__right ul"),s=$(".mzy-footer .prev").parent(),r=$(".mzy-footer .next").parent();o.append(s);for(var u=0;u<d;u++)o.append("<li><a href='javascript:;' class='num'>"+(u+1)+"</a></li>");o.append(r),o.find(".num").eq(c).addClass("cur").parent().siblings().find("a").removeClass("cur")}}function n(e){for(var t=a(),i=!1,n=0;n<t.length;n++)if(t[n]===e){i=!0;break}i||(t.push(e),t.length>r&&t.shift(),localStorage[o]=t.join(s))}function a(){return localStorage[o]?localStorage[o].split(s):[]}var o="mzy-tag-wrap-history",s="&",r=4,c=0,d=0,l=10,u="",h="",p=$(".mzy-contents .u-input-checkbox-wrap"),m=$(".mzy-tag-wrap .u-input-text"),f=$(".mzy-tag-wrap .mzy-empty"),g=$(".mzy-tag-wrap .mzy-contents"),y=$(".mzy-tag-wrap .mzy-footer__right ul"),b=$(".mzy-tag-wrap .mzy-footer__left ul");if("string"==typeof gameId&&$('.u-input-checkbox-wrap [value="'+gameId+'"]').length){var v=$('.u-input-checkbox-wrap [value="'+gameId+'"]').parent().index();c=Math.floor(v/l)}m.prop("disabled",!0),seajs.use(["pinyinDict"],function(){seajs.use(["pinyinUtil"],function(){p.each(function(e,t){var i=$(t);i.data("pinyin",pinyinUtil.getPinyin(i.text(),"",!1)),i.data("py",pinyinUtil.getFirstLetter(i.text(),!1)),i.find('[name="game_name"]').attr("id")||i.find('[name="game_name"]').attr("id","game_name_"+i.text())}),m.prop("disabled",!1);var e=a();if(e.length){b.empty();for(var t=0;t<e.length;t++)b.append("<li><label for='game_name_"+e[t]+"'>"+e[t]+"</label></li>")}else b.parent().hide()})}),$("body").on("click",".mzy-footer .num",function(e){c!==Number($(this).text())-1&&(c=Number($(this).text())-1,i())}).on("click",".mzy-footer .prev",function(e){c<=0||(c-=1,i())}).on("click",".mzy-footer .next",function(e){c>=d-1||(c+=1,i())}).on("click",".mzy-tabs a",function(e){$(this).parent().addClass("active").siblings().removeClass("active"),u=$(this).attr("c_set_id")||"",c=0,i()}).on("keyup",".mzy-tag-wrap .u-input-text",function(e){h!==$.trim($(this).val())&&(h=$.trim($(this).val()),c=0,i())}).on("click","#save",function(){var e=$.trim($('[name="game_name"]').filter(":checked").parent().text());n(e)}).on("click",".mzy-tag-wrap .mzy-footer__left label",function(){var e=$("#game_name_"+$(this).text()).parent().index();m.val(""),h="",$(".mzy-tag-wrap .mzy-tabs li").eq(0).addClass("active").siblings().removeClass("active"),u="",c=Math.floor(e/l),i()}),i()}()})}]);