define("gift/animation",function(){var t=function(t){this.defaults={ele:null,times:10,dir:"x",duration:1e3,widthOrHeight:1e3,steps:10},this.settings=$.extend(this.defaults,t,!0),this.obj=this.settings.ele,this.times=this.settings.times,this.duration=this.settings.duration,this.steps=this.settings.steps,this.oneStep=this.settings.widthOrHeight/this.settings.steps,this.speed=this.duration/this.steps,this.dir=this.settings.dir,this.handler=null,this.step=0,this.time=0};return t.prototype={constructor:t,play:function(){this.step>=this.steps&&(this.step=0,this.time++),0==this.times||this.time<this.times?(this.obj.style.backgroundPosition="y"==this.dir?"0px "+-this.oneStep*this.step+"px":-this.oneStep*this.step+"px 0px",this.step++):this.stop()},start:function(){var t=this;this.handler=setInterval(function(){t.play()},this.speed)},stop:function(){clearInterval(this.handler),this.handler=this.obj=null}},t});
;define("gift/bigStreamerProcessor",function(e,r,s){var o=e("ProcessorClass");s.exports=new o(1)});
;define("gift/bigStreamerAnimation",function(t,n,i){function e(t){var n="";return n+="@"+u+"keyframes "+t.name+" {",n+="0% { background-position: 0 0; }",n+="100% { background-position: -"+t.width*t.steps+"px 0; }",n+="}",n+=".animation-"+t.name+"{",n+='background: url("'+t.bgImg+'");',n+=u+"animation: "+t.name+" "+t.duration+"ms steps("+t.steps+") infinite;",n+="}"}function a(t,n){var i=t.iPropsId;return p[i]||(t.name="bigStreamer"+i,s.importStyle(e(t)),p[i]=t),$.extend({},p[i],{start:function(){$(n).addClass("animation-"+p[i].name)},stop:function(){$(n).removeClass("animation-"+p[i].name)}})}function o(t,n){var i=0,e=null,a=function(i){n.css("backgroundPosition","-"+t.width*(i-1)+"px 0")};return $.extend({},t,{start:function(){n.css("backgroundImage","url("+t.bgImg+")"),a(i=1),e=setInterval(function(){i=i+1<=t.steps?i+1:1,a(i)},t.duration/t.steps)},stop:function(){clearInterval(e)}})}function r(t,n){var i=t.vPropsIdentity.value[0],e={iPropsId:t.iPropsId,width:340,steps:i.iWebBigGiftFrameRate,bgImg:TT.trimUrl(i.sPropBigGiftWeb.split("&")[0]),duration:1e3*Math.round(i.iWebBigGiftFrameRate/10)};return m?a(e,n):o(e,n)}var s=t("tools"),u="",m=s.supportsStyle("animation",function(t){t&&(u="-"+t.toLowerCase()+"-")}),p={};i.exports=r});
;define("gift/bigStreamer",function(e,r,t){function i(e,r,t,a){function s(){g.stop(),t.empty(),a()}function c(e){m+=e,t.find(".g-bigStreamer-count").html(i.createN(m));var r=(new Date).getTime();r-u>.75*g.duration&&d()}var m=e.iItemCount*e.iItemGroup,p='<div class="g-bigStreamer"><div class="g-bigStreamer-prop"></div><div class="g-bigStreamer-comb"><i class="g-bigStreamer-x"></i><span class="g-bigStreamer-count">'+i.createN(m)+'</span></div><div class="g-bigStreamer-ft"><div class="g-bigStreamer-tips"><span class="g-bigStreamer-sender">'+_.escape(e.sSenderNick)+'</span><span>&nbsp;\u9001&nbsp;</span><span class="g-bigStreamer-pName">'+e.sPropsName+"</span></div></div></div>";t.html(p);var g=o(r,t.find(".g-bigStreamer-prop"));g.start();var u=(new Date).getTime(),d=n.debounce(s,g.duration);d(),this.add=c,this.data=e}function a(e){var r=null;return $.each(g,function(t,i){i.lSenderUid==e&&(r=i)}),r}var n=e("tools"),s=e("gift/bigStreamerProcessor"),o=e("gift/bigStreamerAnimation"),c=e("TTP"),m=n.once(function(){return new $.Deferred(function(e){c.on("getGifObj",function(r){for(var t=$.isArray(r.param)?r.param:r.param.vPropsItemList.value,i={},a=0,n=t.length;n>a;a++)i[t[a].iPropsId]=t[a];e.resolve(i,t)},!0)})});i.createN=function(e){for(var r=(e+"").split(""),t="",i=0;i<r.length;i++)t+='<b class="g-bigStreamer-n n-'+r[i]+'"></b>';return t};var p=null,g=[];t.exports={receive:function(e){m().done(function(r){if(r[e.iItemType]){var t=!1;if(e.iItemGroup>1){var n=a(e.lSenderUid);p?p.data.lSenderUid==e.lSenderUid?(null==n?p.add(e.iItemCount):n.iItemGroup=e.iItemGroup,t=!0):n?(n.iItemGroup=e.iItemGroup,t=!0):g.push(e):g.push(e)}else g.push(e);t||s.process(function(e){var t=g.shift();p=new i(t,r[t.iItemType],$("#J_bigStreamerStage"),function(){p=null,e()})})}else try{console.log("\u793c\u7269\uff08"+e.iItemType+"\uff09\u6d41\u5149\u6570\u636e\u672a\u914d\u7f6e")}catch(o){}})}}});
;define("gift/pk",function(n,e){function t(n){var e=new i;return e.info=n,e.update=function(n){e.info=n,e.emit("change",n)},e.find=function(n){if(0!==e.info.iType)for(var t=0,o=e.info.vInfo.value.length;o>t;t++)if(e.info.vInfo.value[t].lXid==n)return e.info.vInfo.value[t];return null},e.parseText=function(n){for(var e="",t=0,o=n.length;o>t;t++)0===(1&t)?t!=o-1&&(e+='<span style="color:'+n[t]+'">'):e+=n[t]+"</span>";return e},e}function o(n){var e=new i;return e.info=n,e.update=function(n){e.info=n,e.emit("change",n)},e}var a=(n("tools"),n("TTP")),i=n("Event"),p=new t({iType:0}),f=new o({lXid:0});e.camp=p,e.support=f,a.isH5?a.one("SupportCampInfoRsp",p.update,!0):a.on("SupportCampInfoRsp",function(n){p.update(n.param)},!0),a.ready(function(n){a.isH5&&n.addTafListener("1025300",p.update)}),a.isH5?a.one("UserSupportCampRsp",f.update,!0):a.on("UserSupportCampRsp",function(n){f.update(n.param)},!0),a.ready(function(n){a.isH5&&n.addTafListener("1025301",f.update)})});
;define("gift/msg",function(e){function a(e){TT.emit("LIVE_ROOM_PROP_NOTICE",e);var a=e.param?e.param.data:e.data,i=p[a.iItemType],o=a.lSenderUid,s=u[o];if(i)if(i.iCount>0){var c=a.iItemType+"x"+a.iItemCount;s&&s.id==c?s.add(a):(s&&s.off(),u[o]=new n({id:c,displayDelay:1e3*i.iDisplayCd,count:i.iCount,displayCallback:function(e,a){t(a.pop(),e)},offCallback:function(){u[o]=null}}),u[o].add(a))}else s&&s.off(),t(a);else s&&s.off(),t(a)}function n(e){function a(a){o(),c=a.iItemGroup,r.push(a),1==c?n():c%e.count==0?n():s()}function n(){r.length&&(s.cancel(),e.displayCallback(c,r),r=[])}function t(){o.cancel(),n(),e.offCallback()}e=$.extend({id:"",displayDelay:0,count:1,offDelay:3e4,displayCallback:function(){},offCallback:function(){}},e);var o=i.debounce(t,e.offDelay),s=i.debounce(n,e.displayDelay),c=0,r=[];return{id:e.id,add:a,off:t}}function t(e,a){a=a||1;var n=e.iItemType,t=m[n],i=p[n]?p[n].gif:"";if(!t)if(t=m[n]=new $.Deferred,i){var o=new Image;o.onload=function(){t.resolve()},o.onerror=function(){t.reject()},o.src=i,t.always(function(){o.onload=o.onerror=null,o=null})}else t.reject();t.always(function(){var n={};try{n=JSON.parse(e.sSendContent)}catch(t){}var o=n.supportCamp?l.find(n.supportCamp.id):null,c="";o&&(c='<p class="cont-item supportCampText">'+l.parseText(o.vChatText.value)+"</p>",c+='<span class="cont-item supportCampPic"><img src="'+TT.trimUrl(o.sLogoUrl).replace(".png","_3.png")+'" /></span>');try{e.sSenderNick=decodeURIComponent(e.sSenderNick)}catch(t){}var r='<div class="tit-h-send"><span class="cont-item name J_userMenu" title="\u70b9\u51fb\u67e5\u770b\u4e2a\u4eba\u4fe1\u606f">'+_.escape(e.sSenderNick)+'</span><span class="cont-item">\u9001</span><span class="cont-item send-gift"><img src="'+i+'" alt="'+e.sPropsName+'" /></span><span class="cont-item">'+e.iItemCount+"</span>"+(a>1?'<span class="cont-item send-comb">'+a+"\u8fde\u51fb</span>":"")+c+"</div>";s.add(r,{uid:e.lSenderUid,nick:_.escape(e.sSenderNick),msg:"\u9001\u793c\u6d88\u606f("+e.sPropsName+" x"+e.iItemCount+")"})})}var i=e("tools"),o=e("TTP"),s=e("msgManager"),c=e("roomShield"),r=e("gift/pk"),l=r.camp,p=null,d=new $.Deferred;try{p=JSON.parse(localStorage.getItem("TT_PROP_MSG_CFG"))}catch(f){}p&&d.resolve(),o.on("getGifObj",function(e){p={};var a=$.isArray(e.param)?e.param:e.param.vPropsItemList.value;$.each(a,function(e,a){var n=p[a.iPropsId]={iDisplayCd:a.iDisplayCd,iCount:a.iCount};n.gif="";try{var t=a.vPropsIdentity.value[0].sPropsWeb,i=t.indexOf("&"),o=-1==i?t:t.substring(0,i);n.gif=TT.trimUrl(o)}catch(s){}});try{localStorage.setItem("TT_PROP_MSG_CFG",JSON.stringify(p))}catch(n){}d.resolve()},!0),d.done(function(){o.ready(function(e){o.isH5?e.addTafListener("6501",function(e){!c.cfg[20001]&&a({data:e})}):o.on("SendItemEx",function(e){!c.cfg[20001]&&a(e)})})});var u={},m={}});
;define("gift/malimalihong",function(e){function s(e){d().done(function(s){s[e.iItemType]&&s[e.iLotteryItemType]&&(p()&&p()==e.lSenderUid?a.preprocess(function(n){new t(e,s[e.iItemType],s[e.iLotteryItemType],$("#J_bigStreamerStage"),function(){n(),i(e,s)})}):i(e,s))})}function t(e,s,i,r,a){function m(){var t=new Image;t.src=n(i,"sPropsPic108"),r.find(".ssq-bigStreamer-award").append(t),r.find(".ssq-bigStreamer-tips").html("\u4f60\u9001\u7ed9\u4e3b\u64ad"+s.sPropsName+"*"+e.iItemCount+"\uff0c\u62bd\u51fa&nbsp;<span>"+i.sPropsName+"</span>")}function c(){d.stop(),r.empty(),a()}var p='<div class="ssq-bigStreamer"><div class="ssq-bigStreamer-prop"></div><div class="ssq-bigStreamer-comb"><i class="ssq-bigStreamer-x"></i><span class="ssq-bigStreamer-count">'+t.createN(e.iItemCount)+'</span></div><div class="ssq-bigStreamer-ft"><div class="ssq-bigStreamer-tips">\u62bd\u7b7e\u4e2d...</div></div><div class="ssq-bigStreamer-award"></div></div>';r.html(p);var d=o(s,r.find(".ssq-bigStreamer-prop"));d.start(),setTimeout(m,d.duration/2),setTimeout(c,d.duration)}function i(e,s){var t='<div class="ssq-msg"><span class="cont-item name J_userMenu" title="\u70b9\u51fb\u67e5\u770b\u4e2a\u4eba\u4fe1\u606f">'+_.escape(e.sSenderNick)+'</span><span class="cont-item">\u9001</span><span class="cont-item send-gift"><img src="'+n(s[e.iItemType],"sPropsWeb")+'" alt="\u793c\u7269-'+e.iItemType+'" /></span><span class="cont-item">'+e.iItemCount+'&nbsp;\uff0c\u62bd\u51fa</span><span class="cont-item send-gift"><img src="'+n(s[e.iLotteryItemType],"sPropsWeb")+'" alt="\u793c\u7269-'+e.iLotteryItemType+'" /></span></div>';c.add(t,{uid:e.lSenderUid,nick:_.escape(e.sSenderNick),msg:"\u9001\u793c\u6d88\u606f(\u793c\u7269-"+e.iItemType+" x"+e.iItemCount+")"})}function n(e,s){var t=e.vPropsIdentity.value[0][s]||"",i=t.indexOf("&");return TT.trimUrl(-1==i?t:t.substring(0,i))}var r=e("tools"),a=e("gift/bigStreamerProcessor"),o=e("gift/bigStreamerAnimation"),m=e("TTP"),c=e("msgManager"),p=r.once(function(){return HUYA_UTIL.getCookieVal("yyuid")});m.isH5?m.ready(function(e){e.addTafListener("6616",s)}):m.on("lotterySubNotify",function(e){s(e.param)});var d=r.once(function(){return new $.Deferred(function(e){m.on("getGifObj",function(s){for(var t=$.isArray(s.param)?s.param:s.param.vPropsItemList.value,i={},n=0,r=t.length;r>n;n++)i[t[n].iPropsId]=t[n];e.resolve(i,t)},!0)})});t.createN=function(e){for(var s=(e+"").split(""),t="",i=0;i<s.length;i++)t+='<b class="ssq-bigStreamer-n n-'+s[i]+'"></b>';return t}});
;define("gift",function(t){function i(t){for(var i={},o=0,a=t.length;a>o;o++){var e=t[o].iPropsId,n=t[o].vPropsIdentity.value[0],r=n.iStreamerFrameRate,s=1e3*Math.round(r/10);i[e]={url:n.sPropStreamerResource,id:t[o].iPropsId,widthOrHeight:l*r,steps:n.iStreamerFrameRate,duration:s}}return i}function o(t){var i="";for(var o in t){var a=t[o],e=h+a.id;i+="@"+u+"keyframes "+e+" {",i+=" 0%{",i+=" background-position: 0 0; ",i+="}",i+="100%{",i+="   background-position: -"+a.widthOrHeight+"px 0; ",i+="}",i+="}\r\n",i+='.gif-animation[data-type="'+e+'"] { ',i+=" width: "+l+'px;background: url("'+TT.trimUrl(a.url)+'");',i+="}\r\n",i+='.show[data-type="'+e+'"]{',i+=u+"animation: "+e+" "+a.duration+"ms steps("+a.steps+") infinite; ",i+="}\r\n"}return i}function a(t){if(1!=e.displayMode&&2!=e.displayMode&&!n.cfg[20002]&&d){var i=t.streamerInfo.iGiftLevel,o=t.streamerInfo.iStreamerLevel;3==i?g.receive(t):(1==o||2==o)&&y.receivePropMessage(t)}}{var e=t("TTP"),n=(t("TTR"),t("roomShield")),r=t("tools"),s=t("ProcessorClass"),m=t("gift/animation"),g=t("gift/bigStreamer"),c=t("gift/pk"),p=c.camp;c.support}t("gift/msg"),t("gift/malimalihong"),HUYA_UTIL.createStyleSheet('@charset "UTF-8";@keyframes g-scale{0%{transform:scale(0.9);opacity:1}50%{transform:scale(1.2);opacity:.9}65%{transform:scale(1.4);opacity:.8}85%{transform:scale(1.2);opacity:.9}100%{transform:scale(1);opacity:1}}@keyframes g-bg{0%{background-position:0 0}100%{background-position:0 -945px}}.chat-room__bd3{width:100%;overflow:hidden}.chat-room__bd3 .g-gift{transform:translateX(0);font-size:12px;height:45px;padding-top:15px;position:absolute;right:-338px;width:338px;z-index:100;transition:transform 300ms}.chat-room__bd3 .g-gift.g-show{transform:translateX(-338px)}.chat-room__bd3 .g-gift.g-hide{transform:translateX(-676px)}.chat-room__bd3 .g-gift .gif-wrap{float:left}.chat-room__bd3 .g-gift .g-textStream{float:left;color:#fff;padding-left:12px;text-shadow:0 1px 4px rgba(0,0,0,.3)}.chat-room__bd3 .g-gift .g-textStream .noble-icon{float:left;margin:13px 2px 0 0}.chat-room__bd3 .g-gift .g-textStream .nick{float:left;line-height:45px;font-size:14px;font-weight:700;max-width:8em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal}.chat-room__bd3 .g-gift .g-textStream .send{float:left;line-height:45px;padding:0 5px}.chat-room__bd3 .g-gift .g-textStream2{float:left;color:#fff;text-shadow:0 1px 4px rgba(0,0,0,.3)}.chat-room__bd3 .g-gift .g-textStream2 .nick{padding:4px 0 0 12px;overflow:hidden}.chat-room__bd3 .g-gift .g-textStream2 .nick .noble-icon{float:left;margin:2px 2px 0 0}.chat-room__bd3 .g-gift .g-textStream2 .nick .name{float:left;font-size:14px;font-weight:700;max-width:8em;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;word-wrap:normal}.chat-room__bd3 .g-gift .g-textStream2 .camp{padding:0 0 0 12px;margin-top:-3px}.chat-room__bd3 .g-gift .count{float:left;margin:13px 0 0 5px}.chat-room__bd3 .g-gift .count i{float:left;height:19px;overflow:hidden;background:url(https://a.msstatic.com/huya/main/img/room/gift/count_14490a1.png)}.chat-room__bd3 .g-gift .count i.n-0{width:14px;background-position:0 0}.chat-room__bd3 .g-gift .count i.n-1{width:9px;background-position:-14px 0}.chat-room__bd3 .g-gift .count i.n-2{width:14px;background-position:-23px 0}.chat-room__bd3 .g-gift .count i.n-3{width:14px;background-position:-37px 0}.chat-room__bd3 .g-gift .count i.n-4{width:14px;background-position:-51px 0}.chat-room__bd3 .g-gift .count i.n-5{width:14px;background-position:-65px 0}.chat-room__bd3 .g-gift .count i.n-6{width:14px;background-position:-79px 0}.chat-room__bd3 .g-gift .count i.n-7{width:13px;background-position:-93px 0}.chat-room__bd3 .g-gift .count i.n-8{width:14px;background-position:-106px 0}.chat-room__bd3 .g-gift .count i.n-9{width:14px;background-position:-120px 0}.chat-room__bd3 .g-gift .count i+i{margin-left:-3px}.chat-room__bd3 .g-gift .combo-wrap{float:left;margin:10px 0 0 5px;transform:scale(0.8);opacity:.7}.chat-room__bd3 .g-gift .combo-wrap.show{animation:g-scale .2s .2s ease forwards}.chat-room__bd3 .g-gift .combo-wrap .g-combo{float:left;width:20px;height:21px;margin:3px 3px 0 0;background:url(https://a.msstatic.com/huya/main/img/room/gift/x_3d7ccc8.png)}.chat-room__bd3 .g-gift .combo-wrap .combo-num{float:left;height:26px;overflow:hidden;background:url(https://a.msstatic.com/huya/main/img/room/gift/times_80e6f4d.png)}.chat-room__bd3 .g-gift .combo-wrap .combo-num.combo-num0{width:20px;background-position:0 0}.chat-room__bd3 .g-gift .combo-wrap .combo-num.combo-num1{width:11px;background-position:-20px 0}.chat-room__bd3 .g-gift .combo-wrap .combo-num.combo-num2{width:19px;background-position:-31px 0}.chat-room__bd3 .g-gift .combo-wrap .combo-num.combo-num3{width:20px;background-position:-50px 0}.chat-room__bd3 .g-gift .combo-wrap .combo-num.combo-num4{width:20px;background-position:-70px 0}.chat-room__bd3 .g-gift .combo-wrap .combo-num.combo-num5{width:21px;background-position:-90px 0}.chat-room__bd3 .g-gift .combo-wrap .combo-num.combo-num6{width:19px;background-position:-111px 0}.chat-room__bd3 .g-gift .combo-wrap .combo-num.combo-num7{width:18px;background-position:-130px 0}.chat-room__bd3 .g-gift .combo-wrap .combo-num.combo-num8{width:20px;background-position:-148px 0}.chat-room__bd3 .g-gift .combo-wrap .combo-num.combo-num9{width:19px;background-position:-168px 0}.chat-room__bd3 .g-gift .bg{position:absolute;bottom:0;left:0;width:100%;height:45px;z-index:-1}.chat-room__bd3 .g-gift .bg.show{animation:g-bg 750ms steps(21) infinite}.chat-room__bd3 .g-gift .bg.glv-1.slv-1{background:url(https://a.msstatic.com/huya/main/img/room/gift/low_9774600.png)}.chat-room__bd3 .g-gift .bg.glv-1.slv-1.mrt-1{background:url(https://a.msstatic.com/huya/main/img/room/gift/lowP_fe84fb1.png)}.chat-room__bd3 .g-gift .bg.glv-1.slv-2{background:url(https://a.msstatic.com/huya/main/img/room/gift/low_gif_4fd9e8d.png)}.chat-room__bd3 .g-gift .bg.glv-1.slv-2.mrt-1{background:url(https://a.msstatic.com/huya/main/img/room/gift/lowP_gif_b7615d9.png)}.chat-room__bd3 .g-gift .bg.glv-2.slv-1{background:url(https://a.msstatic.com/huya/main/img/room/gift/skr_44a0b9f.png)}.chat-room__bd3 .g-gift .bg.glv-2.slv-2{background:url(https://a.msstatic.com/huya/main/img/room/gift/skr_gif_13f218f.png)}.chat-room__bd3 .gif-wrap{position:relative;width:60px;height:45px}.chat-room__bd3 .gif-wrap .gif-animation{position:absolute;left:0;bottom:-4px;width:60px;height:60px}.no-animation .chat-room__bd3 .combo-wrap.show{transform:scale(1);opacity:1}.bigStreamerStage{position:absolute;z-index:100;bottom:100px;left:0;width:100%}.g-bigStreamer{position:relative;width:100%;overflow:hidden}.g-bigStreamer-prop{width:340px;height:180px}.g-bigStreamer-comb{position:absolute;right:20px;top:140px;text-align:center;vertical-align:middle}.g-bigStreamer-x{display:inline-block;width:20px;height:21px;background:url(https://a.msstatic.com/huya/main/img/room/gift/x_3d7ccc8.png);vertical-align:middle;margin-right:5px}.g-bigStreamer-count{display:inline-block;vertical-align:middle}.g-bigStreamer-n{display:inline-block;vertical-align:middle}.g-bigStreamer-n.n-0{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/0_c5ed203.png);width:26px;height:35px}.g-bigStreamer-n.n-1{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/1_e32700f.png);width:14px;height:35px}.g-bigStreamer-n.n-2{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/2_55b5bd4.png);width:25px;height:34px}.g-bigStreamer-n.n-3{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/3_5c60cee.png);width:25px;height:35px}.g-bigStreamer-n.n-4{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/4_0e1ce1e.png);width:27px;height:35px}.g-bigStreamer-n.n-5{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/5_4a9d8af.png);width:26px;height:34px}.g-bigStreamer-n.n-6{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/6_f152235.png);width:25px;height:35px}.g-bigStreamer-n.n-7{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/7_690a572.png);width:24px;height:35px}.g-bigStreamer-n.n-8{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/8_cc05603.png);width:25px;height:35px}.g-bigStreamer-n.n-9{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/9_77dc221.png);width:25px;height:35px}.g-bigStreamer-ft{text-align:center}.g-bigStreamer-tips{display:inline-block;line-height:26px;padding:0 2em;border-radius:13px;background-color:#999;background-color:rgba(0,0,0,.5);color:#fff;vertical-align:middle}.g-bigStreamer-tips span{display:inline-block;vertical-align:middle}.g-bigStreamer-sender{max-width:8em;white-space:nowrap;word-wrap:normal;overflow:hidden;text-overflow:ellipsis}.ssq-bigStreamer{position:relative;width:100%;overflow:hidden}.ssq-bigStreamer-prop{width:340px;height:180px}.ssq-bigStreamer-comb{position:absolute;right:20px;top:140px;text-align:center;vertical-align:middle}.ssq-bigStreamer-x{display:inline-block;width:20px;height:21px;background:url(https://a.msstatic.com/huya/main/img/room/gift/x_3d7ccc8.png);vertical-align:middle;margin-right:5px}.ssq-bigStreamer-count{display:inline-block;vertical-align:middle}.ssq-bigStreamer-n{display:inline-block;vertical-align:middle}.ssq-bigStreamer-n.n-0{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/0_c5ed203.png);width:26px;height:35px}.ssq-bigStreamer-n.n-1{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/1_e32700f.png);width:14px;height:35px}.ssq-bigStreamer-n.n-2{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/2_55b5bd4.png);width:25px;height:34px}.ssq-bigStreamer-n.n-3{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/3_5c60cee.png);width:25px;height:35px}.ssq-bigStreamer-n.n-4{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/4_0e1ce1e.png);width:27px;height:35px}.ssq-bigStreamer-n.n-5{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/5_4a9d8af.png);width:26px;height:34px}.ssq-bigStreamer-n.n-6{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/6_f152235.png);width:25px;height:35px}.ssq-bigStreamer-n.n-7{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/7_690a572.png);width:24px;height:35px}.ssq-bigStreamer-n.n-8{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/8_cc05603.png);width:25px;height:35px}.ssq-bigStreamer-n.n-9{background:url(https://a.msstatic.com/huya/main/img/room/gift/num/9_77dc221.png);width:25px;height:35px}.ssq-bigStreamer-award{position:absolute;top:43px;right:53px}.ssq-bigStreamer-award img{width:90px;height:90px}.ssq-bigStreamer-ft{text-align:center}.ssq-bigStreamer-tips{display:inline-block;line-height:26px;padding:0 2em;border-radius:13px;background-color:#999;background-color:rgba(0,0,0,.5);color:#fff;vertical-align:middle}.ssq-bigStreamer-tips span{color:#fce891}');var d=!1,h="huya-room-gif",l=60,f={},u="",b=r.supportsStyle("animation",function(t){t&&(u="-"+t.toLowerCase()+"-")});b||$("body").addClass("no-animation"),function(){for(var t=["https://a.msstatic.com/huya/main/img/room/gift/low_9774600.png","https://a.msstatic.com/huya/main/img/room/gift/low_gif_4fd9e8d.png","https://a.msstatic.com/huya/main/img/room/gift/skr_44a0b9f.png","https://a.msstatic.com/huya/main/img/room/gift/skr_gif_13f218f.png"],i=t.length;i--;)(new Image).src=t[i]}();var x=function(t){var i=/nobel_level=['|"](\d+)['|"]/,o=t.match(i);return o?o[1]:0},w=function(t,i,o){var a='<div class="g-textStream">';return t>0&&(a+='<span class="noble-icon noble-level-'+t+'"></span>'),a+='<span class="nick">'+i+"</span>",a+='<span class="send">\u9001</span>',a+="</div>",a+='<div class="gif-wrap">',a+='<div class="gif-animation" data-type="'+h+o+'"></div>',a+="</div>"},v=function(t,i,o,a){var e='<div class="g-textStream2"><p class="nick">'+(t>0?'<span class="noble-icon noble-level-'+t+'"></span>':"")+'<span class="name">'+i+'</span></p><p class="camp">'+p.parseText(a.vFlowText.value)+'</p></div><div class="gif-wrap"><div class="gif-animation" data-type="'+h+o+'"></div></div>';return e},S=function(t){var i={id:0,count:1,hideTime:2e3,speed:300,userInfo:null,gifInfo:null,callback:function(){}};this.settings=$.extend(i,t),this.id=this.settings.id,this.gift=null,this.timer=null,this.animation=null,this.bgAnimation=null,this.container=this.settings.container,this.showTime=(new Date).getTime()+this.settings.speed,this.init()};S.prototype={constructor:S,init:function(){var t=this;this.gift=this.createEle();var i=null;this.setHideTimer=function(o){clearTimeout(i),i=setTimeout(function(){t.hide()},o)},this.groupCount=r.throttle(function(){var i='<i class="g-combo"></i>'+t.creatNumber(t.settings.totalGroup),o=t.gift.find(".combo-wrap").removeClass("show").html(i);setTimeout(function(){o.addClass("show")},10)},220),setTimeout(function(){t.show(function(){t.groupCount()}),2==t.settings.userInfo.streamerInfo.iStreamerLevel&&t.high()},16),t.setHideTimer(t.settings.speed+t.settings.hideTime)},add:function(t){this.settings.hideTime+=300,this.setHideTimer(this.settings.hideTime-((new Date).getTime()-this.showTime)),2==t.streamerInfo.iStreamerLevel&&this.high(),this.settings.totalGroup=t.iItemGroup,this.groupCount()},createEle:function(){var t=this.settings,i=t.userInfo,o=(t.type,t.id),a=this.container.height()/4,e='<div class="g-gift" id="gift'+o+'" style="top:'+(60*t.index+a)+'px">';return e+=this.settings.sendText,e+='<span class="count">'+$.map((i.iItemCountByGroup+"").split(""),function(t){return'<i class="n-'+t+'"></i>'}).join("")+"</span>",e+='<div class="combo-wrap"></div>',e+='<div class="bg glv-'+i.streamerInfo.iGiftLevel+" slv-"+i.streamerInfo.iStreamerLevel+" mrt-"+i.streamerInfo.iMaterialType+'"></div>',e+="</div>",this.container.append(e),$("#gift"+o)},show:function(t){var i=this,o=i.gift,a=o.find(".gif-animation");if(b)a.addClass("show"),o.addClass("g-show");else{var e=i.settings.gifInfo,n=$.extend({ele:a[0],times:6},e);i.animation=new m(n),i.animation.start(),o.animate({right:0},i.settings.speed)}setTimeout(t,i.settings.speed)},high:function(){if(!this.bgAnimation){var t=this.gift.find(".bg");if(t.addClass("slv-2"),b)t.addClass("show");else{var i={ele:t[0],widthOrHeight:990,steps:22,times:6,duration:750,dir:"y"};this.bgAnimation=new m(i),this.bgAnimation.start()}}},hide:function(){var t=this,i=t.gift,o=t.animation,a=t.bgAnimation;t.settings.hideBefore.call(this),b?(i.removeClass("g-show").addClass("g-hide"),i.on("transitionend webkitTransitionEnd oTransitionEnd",function(){i.remove(),t.gift=null,t.container=null,t.settings.hideAfter()})):i.animate({right:338},t.settings.speed,function(){i.remove(),o&&(o.stop(),o=null),a&&(a.stop(),a=null),t.gift=null,t.container=null,t.settings.hideAfter.call(t)})},creatNumber:function(t){for(var i=(t+"").split(""),o="",a=0;a<i.length;a++)o+='<span class="combo-num combo-num'+i[a]+'"></span>';return o}};var k=new s(3);e.on("getGifObj",function(t){var a=$.isArray(t.param)?t.param:t.param.vPropsItemList.value;f=i(a),HUYA_UTIL.createStyleSheet(o(f)),d=!0},!0);var y={init:function(){var t=this;this.$container=$(".chat-room__bd3"),n.on("change",function(){n.cfg[20002]&&(t.latestStreamerEffectsOfSomeone={},t.unreadStreamerEffectsOfSomeone={},k.clear())})},latestStreamerEffectsOfSomeone:{},unreadStreamerEffectsOfSomeone:{},receivePropMessage:function(t){{var i=this,o=this.$container;t.iItemType}try{t.sSenderNick=decodeURIComponent(t.sSenderNick)}catch(a){}var e=_.escape(t.sSenderNick),n=f[t.iItemType],r=(new Date).getTime()+""+Math.floor(1e6*Math.random()),s=x(t.sExpand),m={};try{m=JSON.parse(t.sSendContent)}catch(a){}var g=null,c=m.supportCamp&&(g=p.find(m.supportCamp.id))?v(s,e,t.iItemType,g):w(s,e,t.iItemType),d=!1,h=t.lSenderUid,l=i.latestStreamerEffectsOfSomeone[h],u=i.unreadStreamerEffectsOfSomeone[h]||(i.unreadStreamerEffectsOfSomeone[h]=[]);if(l&&0==u.length&&t.iItemGroup>1)l.add(t),d=!0;else if(t.iItemGroup>1){var b=u.length;0==b?u.push([t]):(u[b-1].push(t),d=!0)}else u.push([t]);d||k.process(function(t,a){var e=u.shift(),s=e[0];i.latestStreamerEffectsOfSomeone[h]=new S({id:r,nick:s.sSenderNick,index:a,totalGroup:e[e.length-1].iItemGroup,userInfo:s,gifInfo:n,sendText:c,container:o,hideBefore:function(){i.latestStreamerEffectsOfSomeone[h]&&i.latestStreamerEffectsOfSomeone[h].id==this.id&&(i.latestStreamerEffectsOfSomeone[h]=null)},hideAfter:t})})}};y.init(),e.ready(function(t){e.isH5?t.addTafListener("6501",a):e.on("SendItemEx",function(t){a(t.param.data)})})});