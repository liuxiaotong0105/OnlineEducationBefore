define("roomBlockWords",function(e,t,l){function n(){L=m([].concat(c.global.list).concat(c.local.list))}function a(){c.global.on("ALL",function(e){if("add"==e||"del"==e){var t=f(c.global.list);i(A,t);try{localStorage.setItem(y,t)}catch(e){}}}),c.local.on("ALL",function(e){if("add"==e||"del"==e){var t=f(c.local.list);t?I[s.lp]=t:delete I[s.lp];var l=JSON.stringify(I);i(T,l);try{localStorage.setItem(S,l)}catch(e){}}}),o().done(function(e){$.each(e.vItems.value,function(e,t){if(t.sKey==A&&t.sValue!=f(c.global.list)){c.global.update(p(t.sValue));try{localStorage.setItem(y,t.sValue)}catch(l){}}if(t.sKey==T&&t.sValue!=JSON.stringify(I)){I=v(t.sValue),(I[s.lp]||"")!=f(c.local.list)&&c.local.update(p(I[s.lp]));try{localStorage.setItem(S,t.sValue)}catch(l){}}})}),window.addEventListener&&window.addEventListener("storage",function(e){e.key===y&&null!==e.newValue&&e.newValue!=f(c.global.list)&&c.global.update(p(e.newValue)),e.key===S&&null!==e.newValue&&e.newValue!=JSON.stringify(I)&&(I=v(e.newValue),(I[s.lp]||"")!=f(c.local.list)&&c.local.update(p(I[s.lp])))})}function o(){return new $.Deferred(function(e){r.ready(function(t){if(r.isH5){var l=new HUYA.SettingFetchReq;l.tId=t.userId,l.vKeys.value.push(A),l.vKeys.value.push(T),t.sendWup2("liveui","getUserSetting",l,e.resolve)}else r.isFlash&&(t.callAs("SettingFetchReq",[A,T]),r.one("SettingFetchRsp",function(t){e.resolve(t.param)}))})})}function i(e,t){r.ready(function(l){if(r.isH5){var n=new HUYA.SettingSetupReq;n.tId=l.userId;var a=new HUYA.UserSettingItem;a.sKey=e,a.sValue=t,n.vItems.value.push(a),l.sendWup2("liveui","setUserSetting",n,function(){})}else if(r.isFlash){var o={};o[e]=t,l.callAs("SettingSetupReq",o)}})}var s=e("TTA"),r=e("TTP"),u=e("BlockWords"),c=l.exports={},g=HUYA_UTIL.getCookieVal("yyuid"),d="",f=function(e){return e&&e.length?e.join(d):""},p=function(e){return"string"==typeof e&&e?e.split(d):[]},v=function(e){var t=null;try{t=JSON.parse(e)}catch(l){}return t||{}},y="TT_ROOM_BLOCK_WORDS_"+TT.env+"_"+g,S=y+"_4P",h=localStorage.getItem(y),w=localStorage.getItem(S),I=v(w);c.global=new u(p(h)),c.local=new u(p(I[s.lp]));var V="^$.*+?=!:|\\/()[]{}",b=new RegExp("(\\"+V.split("").join("|\\")+")","g"),m=function(e){var t=[];return $.each(e,function(e,l){t.push(l.replace(b,function(e,t){return"\\"+t}))}),new RegExp(t.join("|"),"i")},L=null;n(),c.global.on("ALL",n),c.local.on("ALL",n),c.test=function(e){return"string"==typeof e&&c.global.list.length+c.local.list.length>0&&L.test(e)},c.testMsg=function(e){var t=g&&g==e.tUserInfo.lUid,l=e.sContent;try{l=decodeURIComponent(l)}catch(n){}return!t&&c.test(l)};var A="blockwords",T="blockword4pid";TT.sudo(a,!1)});