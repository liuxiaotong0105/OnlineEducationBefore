define("sidebar",function(t,e,a){function i(t){$.ajax({url:TT.app.main+"cache10min.php",type:"GET",data:{m:"Ad","do":"ajaxGetAds",type:4,area:14,num:1},dataType:"json"}).done(function(e){if("1000"==e.status){var a=e.data[0];a?t&&t(a):t&&t(!1)}else t&&t(!1)})}function n(){return JSON.parse(window.localStorage.getItem("sidebar/ads"))}function s(){var t={data:n()},e=$.extend(this,new u);e.cfg=function(){return t},e.set={cfg:function(e){t=$.extend({},!0,t,e)}},e.initialize.apply(this,arguments)}function r(){var t=localStorage.getItem("sidebar/match");return"0"==t?f.STATE_HIDE:f.STATE_SHOW}function c(t){var e=localStorage.getItem("sidebar/state")||t;return"1"==e?f.STATE_SHOW:f.STATE_HIDE}function o(){var t=$.extend(this,new u),e={matchState:r(),matchStatus:-1},a=new s;t.cfg=function(){return e},t.ad=function(){return a},t.set={cfg:function(t){e=$.extend({},!0,e,t)}},this.initialize.apply(this,arguments)}var u=t("Event"),d=s.prototype;d.initialize=function(){var t=this;t.getAd()},d.getAd=function(){var t=this;setTimeout(function(){i(function(e){var a=e?e:null;t.set.cfg({data:a}),window.localStorage.setItem("sidebar/ads",JSON.stringify(a)),t.emit("update")})},500)},d.constructor=s;var f={STATE_HIDE:0,STATE_SHOW:1},g=o.prototype;g.initialize=function(t){var e=this;e.set.cfg({state:c(t.firstState),isAllLivePage:0==t.gid,gid:t.gid})},g.setSidebarState=function(t){localStorage.setItem("sidebar/state",t),this.set.cfg({state:t}),this.emit("update:cfg:state")},g.setMatchState=function(t){localStorage.setItem("sidebar/match",t),this.set.cfg({matchState:t}),this.emit("update:cfg:matchState")},g.STATE_CTRL=f,g.constructor=o,a.exports=o});