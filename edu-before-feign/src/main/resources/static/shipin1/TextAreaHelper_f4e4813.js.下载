define("TextAreaHelper",function(){var e=(window.SL,{}),t=jQuery.browser.msie,r=function(){};return e.TextAreaHelper=function(r){if(e.TextAreaHelper.flag||(e.TextAreaHelper.flag=!0),r.helper)return r.helper;r.helper=this,this.dom=r,this.jq=jQuery(r);var a=this;jQuery.each(["keydown","keyup","keypress","change","input","paste","cut","focus","select","click"],function(e,t){a.jq.bind(t,function(){a.jq.trigger("cursorChange")})}),t&&a.jq.on("cursorChange",function(){a.caretPos=document.selection.createRange().duplicate()})},e.TextAreaHelper.prototype.getDom=function(){return this.dom},e.TextAreaHelper.prototype.setText=function(e){this.jq.val(e),this.jq.trigger("cursorChange"),t&&this.caretPos&&(this.caretPos=this.dom.createTextRange().duplicate(),this.caretPos.moveStart("character",e.length),this.caretPos.collapse(!0),this.caretPos.select())},e.TextAreaHelper.prototype.getText=function(){return this.jq.val()},e.TextAreaHelper.prototype.setFocus=function(){var e=this.dom;if(t&&!this.caretPos){var r=e.createTextRange();return r.moveStart("character",e.value.length),r.collapse(!0),r.select(),void e.focus()}e.focus()},t?(e.TextAreaHelper.prototype.setCursor=function(e,t){var r=this.dom.createTextRange();r.collapse(!0),r.moveStart("character",e),r.moveEnd("character",t),r.select()},e.TextAreaHelper.prototype.insertText=function(e,t){t=jQuery.extend({allowRepeat:!0,selectAfterInsert:!1},t);var a=this.dom,n=a.value.indexOf(e);if(!t.allowRepeat&&-1!=n)return this.setCursor(n+1,e.length-2),!1;if(this.caretPos){r("IE, insertText, caretPos exist");var o=this.caretPos;o.text=" "==o.text.charAt(o.text.length-1)?e+" ":e,o.collapse(!1),o.select(),t.selectAfterInsert?(n=a.value.indexOf(e),this.setCursor(n,e.length)):this.dom.focus()}else{var s=a.createTextRange();s.moveStart("character",a.value.length),s.text=e,s.collapse(!0),s.select(),a.focus()}this.jq.trigger("cursorChange")}):e.TextAreaHelper.prototype.insertText=function(e,t){t=jQuery.extend({allowRepeat:!0,selectAfterInsert:!1},t);var r=this.dom,a=r.value.indexOf(e);if(!t.allowRepeat&&-1!=a)return r.setSelectionRange(a+1,a+e.length-1),!1;if(r.setSelectionRange){var n=r.selectionStart,o=r.selectionEnd,s=r.value.substring(0,n),c=r.value.substring(o),l=s+e,i=l.length;r.value=l+c,r.setSelectionRange(i,i)}else r.value+=e;t.selectAfterInsert?r.setSelectionRange(s.length,s.length+e.length):r.focus(),this.jq.trigger("cursorChange")},e.TextAreaHelper.prototype.insertEmotion=function(){},e.TextAreaHelper.prototype.changeValue=function(){},e.TextAreaHelper.prototype.ctrlenter=function(){},e.TextAreaHelper});