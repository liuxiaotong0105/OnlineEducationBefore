define("widget/roomBlockWords",function(require,exports,module){function Panel(container){var self=$.extend(this,new Event),tpl=function(obj){{var __p="";Array.prototype.join}with(obj||{})__p+='<div class="roomBlockWords">\r\n    <div class="roomBlockWords-hd">\u5f39\u5e55\u5173\u952e\u8bcd\u5c4f\u853d</div>\r\n    <div class="roomBlockWords-bd">\r\n        <div class="roomBlockWords-nav">\r\n            <span class="roomBlockWords-nav-item on">\u672c\u76f4\u64ad\u95f4</span>\r\n            <span class="roomBlockWords-nav-item">\u5168\u5e73\u53f0</span>\r\n        </div>\r\n        <div class="roomBlockWords-unit J_bwLocal" style="display: block;">\r\n            <div class="roomBlockWords-cont">\r\n                <div class="roomBlockWords-info">\r\n                    <p class="roomBlockWords-count J_count"></p>\r\n                </div>\r\n                <div class="roomBlockWords-list J_list"></div>\r\n            </div>\r\n            <div class="roomBlockWords-input">\r\n                <input class="J_input" type="text" placeholder="\u8bf7\u8f93\u5165\u5173\u952e\u8bcd" maxlength="10" />\r\n                <span class="btn disable J_add">\u6dfb\u52a0</span>\r\n                <em class="count J_inputCount">0/10</em>\r\n            </div>\r\n        </div>\r\n        <div class="roomBlockWords-unit J_bwGlobal">\r\n            <div class="roomBlockWords-cont">\r\n                <div class="roomBlockWords-info">\r\n                    <p class="roomBlockWords-count J_count"></p>\r\n                </div>\r\n                <div class="roomBlockWords-list J_list"></div>\r\n            </div>\r\n            <div class="roomBlockWords-input">\r\n                <input class="J_input" type="text" placeholder="\u8bf7\u8f93\u5165\u5173\u952e\u8bcd" maxlength="10" />\r\n                <span class="btn disable J_add">\u6dfb\u52a0</span>\r\n                <em class="count J_inputCount">0/10</em>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <i class="roomBlockWords-x J_close"></i>\r\n</div>';return __p},cssText='@charset "UTF-8";.roomBlockWords{background:#fff;color:#333;font-family:"Microsoft YaHei";position:relative;border-radius:3px}.roomBlockWords-x{position:absolute;right:11px;top:15px;width:11px;height:11px;overflow:hidden;background:url(https://a.msstatic.com/huya/main/widget/roomBlockWords/img/a_9940a83.png);cursor:pointer}.roomBlockWords-hd{height:40px;line-height:40px;text-indent:12px;border-bottom:1px solid #eee;font-size:14px}.roomBlockWords-nav{line-height:36px;font-size:14px;text-align:center;overflow:hidden;zoom:1}.roomBlockWords-nav-item{float:left;width:50%;cursor:pointer;background-color:#f2f3f6}.roomBlockWords-nav-item.on{font-weight:700;color:#f80;cursor:default;background-color:transparent}.roomBlockWords-unit{display:none}.roomBlockWords-input{position:relative;padding:15px;border-top:1px solid #eee}.roomBlockWords-input input{-moz-box-sizing:border-box;box-sizing:border-box;width:250px;height:36px;border:1px solid #DFDFDF;padding:7px 50px 7px 10px;font-size:14px;outline:0}.roomBlockWords-input input:focus{border-color:#f80}.roomBlockWords-input .btn{position:absolute;right:15px;top:15px;width:60px;line-height:36px;text-align:center;color:#fff;font-size:14px;background:#f80;cursor:pointer}.roomBlockWords-input .btn:hover{background:#f90}.roomBlockWords-input .btn.disable{background:#C9C9C9;cursor:default}.roomBlockWords-input .btn.disable:hover{background:#C9C9C9}.roomBlockWords-input .count{position:absolute;left:215px;top:15px;width:50px;line-height:36px;color:#999;text-align:center}.roomBlockWords-info{overflow:hidden;zoom:1;margin:8px 15px 0;padding-bottom:8px;border-bottom:1px solid #eee}.roomBlockWords-count{float:left;font-size:14px}.roomBlockWords-list{padding:5px 0;min-height:160px}.roomBlockWords-list li{position:relative;line-height:32px;padding:0 15px}.roomBlockWords-list li:hover{background:#eee}.roomBlockWords-list li i{position:absolute;right:15px;top:9px;width:14px;height:13px;overflow:hidden;background:url(https://a.msstatic.com/huya/main/widget/roomBlockWords/img/b_6b8ea89.png);cursor:pointer}.roomBlockWords-list li i:hover{background:url(https://a.msstatic.com/huya/main/widget/roomBlockWords/img/c_d8671b8.png)}.roomBlockWords-empty{height:160px;background:url(https://a.msstatic.com/huya/main/widget/roomBlockWords/img/d_b4d0615.png) 50% no-repeat;position:relative}.roomBlockWords-empty span{position:absolute;width:100%;top:125px;display:block;text-align:center;color:#999}';tools.importStyle(cssText);var html=tpl(),elm=$(html);elm.on("click",".J_close",function(o){o.preventDefault(),self.emit("close")});var nav=elm.find(".roomBlockWords-nav-item"),unit=elm.find(".roomBlockWords-unit");nav.on("click",function(o){o.preventDefault();var r=$(this).index();nav.removeClass("on").eq(r).addClass("on"),unit.hide().eq(r).show()}),new BlockWords(elm.find(".J_bwLocal"),roomBlockWords.local),new BlockWords(elm.find(".J_bwGlobal"),roomBlockWords.global),$(container).append(elm),roomBlockWords.global.on("add",function(){try{ya.reportProductEvent({eid:"click/setting/keywordshield/allroom/add",eid_desc:"\u70b9\u51fb/\u8bbe\u7f6e/\u5173\u952e\u8bcd\u5c4f\u853d/\u5168\u5e73\u53f0/\u6dfb\u52a0"})}catch(o){}}),roomBlockWords.global.on("del",function(){try{ya.reportProductEvent({eid:"click/setting/keywordshield/allroom/del",eid_desc:"\u70b9\u51fb/\u8bbe\u7f6e/\u5173\u952e\u8bcd\u5c4f\u853d/\u5168\u5e73\u53f0/\u5220\u9664"})}catch(o){}}),roomBlockWords.local.on("add",function(){try{ya.reportProductEvent({eid:"click/setting/keywordshield/thisroom/add",eid_desc:"\u70b9\u51fb/\u8bbe\u7f6e/\u5173\u952e\u8bcd\u5c4f\u853d/\u672c\u76f4\u64ad\u95f4/\u6dfb\u52a0"})}catch(o){}}),roomBlockWords.local.on("del",function(){try{ya.reportProductEvent({eid:"click/setting/keywordshield/thisroom/del",eid_desc:"\u70b9\u51fb/\u8bbe\u7f6e/\u5173\u952e\u8bcd\u5c4f\u853d/\u672c\u76f4\u64ad\u95f4/\u5220\u9664"})}catch(o){}})}function BlockWords(elm,mod){function render(){elm.find(".J_count").text("\u5df2\u6dfb\u52a0\u5173\u952e\u8bcd ( "+mod.list.length+"/"+limit+" )"),elm.find(".J_list").html(tpl_list({data:mod.list})),elm.find(".J_input").prop("disabled",mod.list.length>=limit)}function submit(){var o=getVal();elm.find(".J_input").val(""),elm.find(".J_inputCount").text("0/10"),elm.find(".J_add").addClass("disable"),mod.add(o)}function getVal(){return $.trim(elm.find(".J_input").val())}var limit=10,tpl_list=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+="",data.length?(__p+="\r\n<ul>\r\n    ",$.each(data,function(o,r){__p+='\r\n        <li class="roomBlockWords-item"><span>'+(null==(__t=r)?"":_.escape(__t))+'</span><i class="J_del" data-index="'+(null==(__t=o)?"":__t)+'"></i></li>\r\n    '}),__p+="\r\n</ul>\r\n"):__p+='\r\n<div class="roomBlockWords-empty"><span>\u6682\u65e0\u6dfb\u52a0\u5173\u952e\u5b57</span></div>\r\n',__p+="";return __p};render(),mod.on("add",render),mod.on("del",render),mod.on("update",render),elm.on("click",".J_add",function(o){o.preventDefault(),getVal()&&submit()}),elm.find(".J_input").on("keydown",function(o){13==o.keyCode&&getVal()&&submit()}),elm.on("click",".J_del",function(o){o.preventDefault(),mod.del(mod.list[$(this).data("index")])}),elm.find(".J_input").on("keyup",tools.debounce(function(){var o=getVal(),r=$(this).val();elm.find(".J_add")[o?"removeClass":"addClass"]("disable"),elm.find(".J_inputCount").text(Math.min(r.length,10)+"/10")},60))}var Event=require("Event"),tools=require("tools"),roomBlockWords=require("roomBlockWords");module.exports=Panel});