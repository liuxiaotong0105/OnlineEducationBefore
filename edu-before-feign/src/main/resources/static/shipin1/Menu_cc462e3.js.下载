define("widget/ucard/Menu.js",function(e,n,t){function i(e){function n(){o.show()}function t(){o.hide()}e=$.extend({options:[],onselect:function(){}},e);var i=$.Callbacks();i.add(e.onselect);var a=['<div class="menu">',function(){var n="";return $.each(e.options,function(e,t){n+="<ul>",$.each(t,function(e,t){n+='<li data-code="'+t.code+'">'+t.content+"</li>"}),n+="</ul>"}),n}(),"</div>"],o=$(a.join(""));return o.on("click","li",function(e){e.preventDefault();var n=$(this).data("code");n&&i.fire(n,this)}),n(),{view:o,open:n,close:t,onselect:function(e){i.add(e)}}}function a(e,n,t){t="function"==typeof t?t:function(){},TTP.isH5?TTP.ready(function(i){i.addTafListener("queryBadgeInfo",function(e){t(e.param?e.param:e),i.removeTafListener("queryBadgeInfo")});var a=new HUYA.BadgeReq;a.lToUid=e,a.lBadgeId=n,i.sendWup("liveui","queryBadgeInfo",a)}):(TTP.one("GetFansBadgeInfoResp",function(e){t(e.param?e.param:e)}),TTP.ready(function(t){t.callAs("GetFansBadgeInfoReq",{user_uid:e,badge_id:n})}))}function o(e,n,t,i,a){a="function"==typeof a?a:function(){},TTP.isH5?TTP.ready(function(o){o.addTafListener("setBadgeV",function(e){a(e.param?e.param:e),o.removeTafListener("setBadgeV")});var c=new HUYA.SetBadgeVReq;c.lFansUid=e,c.lBadgeId=n,c.iVFlag=t,c.iEffectiveDay=i,c.tUserId.lUid=HUYA_UTIL.getCookieVal("yyuid"),c.tUserId.sToken=HUYA_UTIL.getCookieVal("udb_n"),c.tUserId.iTokenType=3,c.tUserId.sCookie=document.cookie,o.sendWup("liveui","setBadgeV",c)}):(TTP.one("setBadgeVRsp",function(e){a(e.param?e.param:e)}),TTP.ready(function(a){a.callAs("SetBadgeVReq",{lFansUid:e,lBadgeId:n,iVFlag:t,iEffectiveDay:i})}))}var c=e("TTA"),d=e("tools"),l=e("widget/dialog").dialog,s=e("widget/roomMute"),r=e("widget/roomBan"),u={MUTE:{content:'<i class="mute-icon"></i><span>\u7981\u6b62\u53d1\u8a00</span>',handle:function(e){s(e.uid,e.nick,e.text,0)},eid:"jzfy",edes:"\u7981\u8a00\u53d1\u8a00"},BLOCK:{content:'<i class="blacklist-icon"></i><span>\u5c01\u5165\u9ed1\u540d\u5355</span>',handle:function(e){r(e.uid,e.nick,e.text)},eid:"frhmd",edes:"\u5c01\u5165\u9ed1\u540d\u5355"},BLOCK_IP:{content:'<i class="xip-icon"></i><span>\u5c01\u7981IP</span>',handle:function(e){s(e.uid,e.nick,e.text,2)},eid:"fzip",edes:"\u5c01\u7981IP"},VFANS:{content:'<i class="vf-icon"></i><span>\u6388\u4e88\u94bb\u7c89</span>',handle:function(e,n){var t=".pollinationV {padding: 20px;}.pollinationV-effectiveDay {padding-top: 12px;}.pollinationV label {padding-left: 3em; display: inline-block; cursor: pointer;}.pollinationV label:first-child {padding-left: 0;}.pollinationV input {vertical-align: middle;}";d.importStyle(t,"dlg-pollinationV-style");var i='<div class="pollinationV"><p>\u786e\u5b9a\u6388\u4e88\u3010'+HUYA_UTIL.xssFilter(e.nick)+'\u3011\u94bb\u7c89\u5417\uff1f</p><div class="pollinationV-effectiveDay"><label><input type="radio" name="vfansEffectiveDay" value="30" checked /> 30\u5929</label><label><input type="radio" name="vfansEffectiveDay" value="90" /> 90\u5929</label><label><input type="radio" name="vfansEffectiveDay" value="-1" /> \u6c38\u4e45</label></div></div>';new l({title:"\u8bf7\u786e\u8ba4",content:i,buttons:[{name:"\u786e\u5b9a",click:function(){var t=this.view.find("input:checked").val();o(e.uid,c.lp,1,parseInt(t,10),function(e){switch(e.iRet){case 0:l.suc("\u64cd\u4f5c\u6210\u529f","\u64cd\u4f5c\u6210\u529f"),$(n).data("code","VFANS_UNDO").html(u.VFANS_UNDO.content);break;case 907:l.err("\u64cd\u4f5c\u5931\u8d25","\u94bb\u7c89\u540d\u989d\u5df2\u6ee1");break;default:l.err("\u64cd\u4f5c\u5931\u8d25","\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01("+e.iRet+")")}})},close:!0},{name:"\u53d6\u6d88",close:!0}]})},eid:"syzf",edes:"\u6388\u4e88\u94bb\u7c89"},VFANS_UNDO:{content:'<i class="vf-icon"></i><span>\u64a4\u9500\u94bb\u7c89</span>',handle:function(e,n){l.alert("\u8bf7\u786e\u8ba4","\u786e\u5b9a\u64a4\u9500\u3010"+e.nick+"\u3011\u94bb\u7c89\u5417\uff1f",[{name:"\u786e\u5b9a",click:function(){o(e.uid,c.lp,0,-1,function(e){switch(e.iRet){case 0:l.suc("\u64cd\u4f5c\u6210\u529f","\u64cd\u4f5c\u6210\u529f"),$(n).data("code","VFANS").html(u.VFANS.content);break;case 907:l.err("\u64cd\u4f5c\u5931\u8d25","\u94bb\u7c89\u540d\u989d\u5df2\u6ee1");break;default:l.err("\u64cd\u4f5c\u5931\u8d25","\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01("+e.iRet+")")}})},close:!0},{name:"\u53d6\u6d88",close:!0}])},eid:"cxzf",edes:"\u64a4\u9500\u94bb\u7c89"}};i.superAuditor=function(e,n){var t=[[{code:"MUTE",content:u.MUTE.content},{code:"BLOCK",content:u.BLOCK.content},{code:"BLOCK_IP",content:u.BLOCK_IP.content}]],a=new i({options:t,onselect:function(n,t){u[n].handle(e,t);try{ya.reportProductEvent({eid:"click/zhibo/gp/"+u[n].eid,eid_desc:"\u70b9\u51fb/\u76f4\u64ad/\u516c\u5c4f/"+u[n].edes})}catch(i){}}});n(a)},i.auditor=function(e,n){var t=[[{code:"MUTE",content:u.MUTE.content},{code:"BLOCK",content:u.BLOCK.content}]],a=new i({options:t,onselect:function(n,t){u[n].handle(e,t);try{ya.reportProductEvent({eid:"click/zhibo/gp/"+u[n].eid,eid_desc:"\u70b9\u51fb/\u76f4\u64ad/\u516c\u5c4f/"+u[n].edes})}catch(i){}}});n(a)},i.anchor=function(e,n){a(e.uid,c.lp,function(t){var a=[];if(t&&t.iBadgeLevel>0&&a.push([t.iVFlag?{code:"VFANS_UNDO",content:u.VFANS_UNDO.content}:{code:"VFANS",content:u.VFANS.content}]),a.length){var o=new i({options:a,onselect:function(n,t){u[n].handle(e,t);try{ya.reportProductEvent({eid:"click/zhibo/gp/"+u[n].eid,eid_desc:"\u70b9\u51fb/\u76f4\u64ad/\u516c\u5c4f/"+u[n].edes})}catch(i){}}});n(o)}})},t.exports=i});