define("widget/createLayer",function(){!function(e){function t(e){var t=e.width,i=e.height+50,o="#"+e.idDom+"{width:"+t+"px;height:"+i+"px;margin-left:"+-t/2+"px;margin-top:"+-i/2+"px;}";a?a+=o:a=o,n.createStyleSheet(a),a=""}function i(e){var i=e.url,n=e.width,a=e.height,o='<iframe src="'+i+'" width="'+n+'px" height="'+a+'px" frameborder="0" class="create-layer-iframe"></iframe>',r=document.createElement("div"),s=document.getElementsByTagName("body")[0];if(t(e),r.id=e.idDom,r.className="create-layer",r.innerHTML="<h2>"+e.title+' <span class="close-create-layer" title="\u5173\u95ed" id="close'+e.idDom+'"></span></h2>'+o,e.idMask){var l=document.createElement("div");l.id=e.idMask,l.className="create-layer-mask",l.innerHTML="<i></i>",s.appendChild(l)}s.appendChild(r)}var n={createStyleSheet:function(e){var t;document.createStyleSheet?(t=document.createStyleSheet(),t.cssText=e):(t=document.createElement("style"),t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t))},deepCopy:function(e,t){var t=t||{};for(var i in e)"object"==typeof e[i]?(t[i]=e[i].constructor===Array?[]:{},this.deepCopy(e[i],t[i])):t[i]=e[i];return t},byId:function(e){return"string"==typeof e?document.getElementById(e):e},byTagName:function(e,t){return(t||document).getElementsByTagName(e)},byClass:function(e,t){for(var i=[],n=new RegExp("(^|\\s)"+e+"(\\s|$)"),a=this.byTagName("*",t),o=a.length,r=0;o>r;r++)n.test(a[r].className)&&i.push(a[r]);return i},addHandler:function(e,t,i){return e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)}},a=".create-layer-mask{position:fixed;_position:absolute;top:0;left:0;width:100%;height:100%;background:#000;opacity:.4;filter:alpha(opacity=40);z-index:10000}.create-layer-mask i{position:absolute;top:0;right:0;display:inline-block;width:32px;height:32px;background:url(https://a.msstatic.com/huya/main/widget/createLayer/img/close_725dce5.png) no-repeat;cursor:pointer}.create-layer{z-index:19999;position:fixed;_position:absolute;left:50%;top:50%;background:#333}.create-layer h2{cursor:move;height:50px;line-height:50px;background:#191919;color:#ccc;font-size:14px;font-weight:800;padding-left:10px}.close-create-layer{width:19px;height:19px;background:url(https://a.msstatic.com/huya/main/widget/createLayer/img/close-icon_3dab4d7.png) no-repeat;position:absolute;top:15px;right:18px;cursor:pointer;transition:transform .5s ease}.close-create-layer:hover{transform:rotate(180deg)}";e.Createlayer=function(){this.initialize.apply(this,arguments)},Createlayer.prototype={initialize:function(e){var t={width:720,height:510,url:"",title:"",idDom:"",idMask:""};this.defaultArgs=n.deepCopy(e,t),i(this.defaultArgs),this.bindEvent(this.defaultArgs),this.bindDrag(this.defaultArgs)},bindEvent:function(e){var t=this;this.nobleMask=n.byId(e.idMask),this.nobleLayer=n.byId(e.idDom),this.closeNobleLayer=n.byId("close"+e.idDom),n.addHandler(this.closeNobleLayer,"click",function(){t.hide()}),$("#"+e.idMask).on("click","i",function(e){e.preventDefault(),t.hide()})},hide:function(){this.nobleMask&&(this.nobleMask.style.display="none"),this.nobleLayer.style.display="none"},show:function(e){if(this.nobleMask&&(this.nobleMask.style.display="block"),e){var t=n.byClass("create-layer-iframe",this.nobleLayer);t[0].setAttribute("src",this.defaultArgs.url)}this.nobleLayer.style.display="block"},bindDrag:function(){var e=this.nobleLayer,t=e.getElementsByTagName("h2")[0],i=disY=0;t.onmousedown=function(n){var n=n||window.event;return i=n.clientX-e.offsetLeft,disY=n.clientY-e.offsetTop,document.onmousemove=function(t){var t=t||window.event,n=t.clientX-i,a=t.clientY-disY,o=document.documentElement.clientWidth-e.offsetWidth,r=document.documentElement.clientHeight-e.offsetHeight;return n=0>n?0:n,n=n>o?o:n,a=0>a?0:a,a=a>r?r:a,e.style.marginTop=e.style.marginLeft=0,e.style.left=n+"px",e.style.top=a+"px",!1},document.onmouseup=window.onblur=t.onlosecapture=function(){document.onmousemove=null,document.onmouseup=null,this.releaseCapture&&this.releaseCapture()},this.setCapture&&this.setCapture(),!1}}}}(window)});