define("widget/fansbadge",function(require,exports,module){function getBadgeList(a){a="function"==typeof a?a:function(){},TTP.isH5?TTP.ready(function(e){var t=new HUYA.BadgeInfoListReq;t.tUserId=e.userId,e.sendWup2("liveui","queryBadgeInfoList",t,a)}):(TTP.one("GetFansBadgeListResp",function(e){a(e.param)}),TTP.ready(function(a){a.callAs("GetFansBadgeListReq")}))}function badgeUseReq(a,e,t){t="function"==typeof t?t:function(){},TTP.ready(TTP.isH5?function(d){var n=new HUYA.UseBadgeReq;n.tUserId=d.userId,n.lBadgeId=a,n.iBadgeType=e,d.sendWup2("liveui","useBadgeV2",n,t)}:function(d){TTP.one("UseFansBadgeRespV2",function(a){t(a.param)}),d.callAs("UseFansBadgeReqV2",{lBadgeId:a,iBadgeType:e,lToUid:0})})}function getBadgeItem(a,e){e="function"==typeof e?e:function(){},TTP.ready(TTP.isH5?function(t){var d=new HUYA.BadgeItemReq;d.tUserId=t.userId,d.lPid=a,t.sendWup2("liveui","getBadgeItem",d,e)}:function(){TTP.one("BadgeItemRsp",function(a){e(a.param)}),TTP.call("BadgeItemReq",{lPid:a})})}function Badge(a){function e(a,e){var t=null;return $.each(n,function(d,n){return n&&n.lBadgeId==a&&n.iBadgeType==e?(t=n,!1):void 0}),t}function t(a){if(a=a.param?a.param:a,a.iNewBadge)n.push(a.tBadgeInfo),d.emit("change",a);else{var t=e(a.tBadgeInfo.lBadgeId,a.tBadgeInfo.iBadgeType);t&&($.extend(t,a.tBadgeInfo),d.emit("change",a,t===i))}}var d=new Event,n=a.vBadgeInfo&&a.vBadgeInfo.value&&a.vBadgeInfo.value.length?a.vBadgeInfo.value:[],i=null;i=1===n.length&&0!==a.lUsingBadgeId&&"0"!==a.lUsingBadgeId?n[0]:e(a.lUsingBadgeId,a.iUsingBadgeType);var s=function(a,t,s){var l=e(a,t);if(l!==i){var g=i;0===a?(badgeUseReq(0,0,s),i=null,d.emit("use",i,g,-1)):l&&(badgeUseReq(a,t,s),i=l,d.emit("use",i,g,indexOf.call(n,i)))}};return TTP.isH5?TTP.ready(function(a){a.addTafListener("6232",t)}):TTP.on("FansBadgeUpNotice",t),{use:s,onUse:function(a){d.on("use",a)},onChange:function(a){d.on("change",a)},getItem:e,all:function(){return n},eq:function(a){return n[a]?$.extend({},n[a]):null},total:function(){return n.length},current:function(){return i?$.extend({},i):i},getBadgeName:function(a){return a?1==a.iBadgeType?a.tFaithInfo.sFaithName:a.sBadgeName:""},isSame:function(a,e){return a===e?!0:a&&e&&a.lBadgeId==e.lBadgeId&&a.iBadgeType==e.iBadgeType?!0:!1}}}function init(a){var e=function(){var a=$.Deferred(),e=$.Deferred(),t=$.when(a,e);getBadgeList(a.resolve),getBadgeItem(TTA.lp,e.resolve);var d=setTimeout(function(){a.reject(),e.reject()},6e4);return t.done(function(){clearTimeout(d)}),t}();!function(){function a(){clearTimeout(d),$("#J_fansBadgeDetail").show(),n||(n=!0,$("#J_fansBadgeDetail").html(tpl_loading()))}function t(){d=setTimeout(function(){$("#J_fansBadgeDetail").hide()},200)}var d,n;$("#chatHostPic").on("mouseenter.loading",a).on("mouseleave.loading",t),$("#J_fansBadgeDetail").on("mouseenter.loading",a).on("mouseleave.loading",t),e.always(function(){$("#J_chatFansBadge").removeClass("chat-fansbadge-loading"),$("#chatHostPic").off("mouseenter.loading").off("mouseleave.loading"),$("#J_fansBadgeDetail").off("mouseenter.loading").off("mouseleave.loading").empty()})}();var t,d;e.done(function(a,e){function n(){var a=t.current();g.html(a?fansIcon.create(a.iBadgeLevel,t.getBadgeName(a),a.lBadgeId,a.iBadgeType):t.total()>0?'<i class="badge-null"></i>':'<i class="badge-empty"></i>')}function i(){var a=t.current();t.total()>0?o.html(a?1==a.iBadgeType?tpl_badgeFaith({data:a}):tpl_badge({data:a}):tpl_null({total:t.total()})):1==e.iBadgeType?new s(e,o):o.html(tpl_empty({data:e}))}function s(a,e){var t=tpl_faithGuide({data:a}),d=$(t);e.append(d);var n=0,i=a.tFaithItem.vFaithPic.value.length-1,s=function(a){n=Math.min(Math.max(0,a),i),d.find(".J_list").css("marginLeft",-(200*n)),d.find(".J_prev").show(),d.find(".J_next").show(),0==n&&d.find(".J_prev").hide(),n==i&&d.find(".J_next").hide()};a.tFaithItem.vFaithPic.value.length>1&&(d.on("click",".J_next",function(a){a.preventDefault(),s(n+1)}),d.on("click",".J_prev",function(a){a.preventDefault(),s(n-1)})),d.on("click",".J_do",function(a){a.preventDefault(),TT.emit("GET_BADGE_FAITH")})}function l(){t.total()>0&&(r.empty(),r.html(tpl_list({data:t.all(),currenBadge:t.current()})))}t=new Badge(a),d=e;var g=$("#J_chatFansBadge");n(),t.onUse(n),t.onChange(function(a,e){e&&0!=a.iBadgeLevelChanged&&n(),a.iNewBadge&&1==t.total()&&n()});var o=$("#J_fansBadgeDetail");i(),t.onUse(i),t.onChange(function(a,e){e&&i(),a.iNewBadge&&1==t.total()&&i()});var r=$("#J_fansBadgeList");l(),t.onChange(function(a){(a.iNewBadge||0!=a.iBadgeLevelChanged)&&l()}),t.onUse(function(a,e,t){var d=r.find("li");d.removeClass("on"),-1!=t&&d.eq(t).addClass("on")}),r.on("click","li",function(a){a.preventDefault();var e=$(this).index(),d=t.eq(e);t.use(d.lBadgeId,d.iBadgeType)}).on("click",".fansBadge-itemNull",function(a){a.preventDefault(),t.use(0)});var f,p,u=function(){clearTimeout(f),o.show()},c=function(){clearTimeout(f),f=setTimeout(function(){o.hide()},200)},B=function(){if(clearTimeout(p),r.show(),u(),t.total()>8){var a=r.find(".fansBadge-items");a.data("jsp")||a.jScrollPane({mouseWheelSpeed:20,verticalGutter:0,isOutsideNotPrevent:!1})}},h=function(){clearTimeout(p),p=setTimeout(function(){r.hide()},200)};$("#J_chatFansBadge").on("mouseenter",u).on("mouseleave",c),o.on("mouseenter",u).on("mouseleave",c),o.on("mouseenter",".J_showfansBadgeList",B).on("mouseleave",".J_showfansBadgeList",h),r.on("mouseenter",B).on("mouseleave",function(){h(),c()});var _=$("#J_fansBadgeTip");t.onChange(function(a){function e(){_.empty().hide(),a=null}function e(){clearInterval(d),_.empty().hide(),a=null}if(a.iNewBadge)_.html(tpl_new({data:a.tBadgeInfo})),_.show(),_.find(".J_fansBadgeTipUse").on("click",function(d){d.preventDefault(),t.use(a.tBadgeInfo.lBadgeId,a.tBadgeInfo.iBadgeType),e()}),_.find(".J_fansBadgeTipClose").on("click",function(a){a.preventDefault(),e()});else if(a.iBadgeLevelChanged){var d,n=5;_.html(tpl_up({data:a.tBadgeInfo,timeout:n})),_.show(),_.find(".J_fansBadgeTipClose").on("click",function(a){a.preventDefault(),e()});var i=_.find(".J_fansBadgeTipCd");d=setInterval(function(){i.text(--n),0===n&&e()},1e3)}})}),e.fail(function(){t=new Badge({vBadgeInfo:{value:[]}}),d={iItemType:0,iItemCount:0,lPid:TTA.lp,sBadgeName:"",iBadgeType:0,lBadgeId:0,tFaithItem:{sObtainWay:"",sFaithName:"",sFaithContent:"",vFaithPic:{value:[]},sActionName:"",sActionUrl:""}},$("#J_chatFansBadge").html('<i class="badge-null"></i>')}),e.always(function(){a(t,d)})}var TTA=require("TTA"),tools=require("tools"),TTP=require("TTP"),Event=require("Event");require("jScrollPane");var indexOf=[].indexOf||function(a){for(var e=0,t=this.length;t>e;e++)if(this[e]===a)return e;return-1},fansIcon=require("widget/fans-icon"),cssText='@charset "UTF-8";.fansBadge-stateUp,.fansBadge-stateStop,.fansBadge-stateDown{display:inline-block;width:12px;height:12px}.fansBadge-stateUp{background:url(https://a.msstatic.com/huya/main/widget/fansbadge/img/up_c7c9953.png)}.fansBadge-stateStop{background:url(https://a.msstatic.com/huya/main/widget/fansbadge/img/stop_fc7a0fa.png)}.fansBadge-stateDown{background:url(https://a.msstatic.com/huya/main/widget/fansbadge/img/down_9ff3e69.png)}.fansBadge-qm{display:inline-block;width:13px;height:13px;background:url(https://a.msstatic.com/huya/main/widget/fansbadge/img/q_4e32395.png)}.fansBadge-more{color:#429bd2}.fansBadge-more i{font-family:\\5b8b\\4f53}.fansBadge-hig{color:#f80}.fansBadge-box{position:relative;font-family:"Microsoft YaHei";border:1px solid #ECECEC;border-top:2px solid #F80;background:#fff;color:#555;word-wrap:normal}.fansBadge-box .fansBadge-box-hd{padding:5px 10px;font-size:12px;font-weight:700;color:#777}.fansBadge-box a{text-decoration:none;color:#429bd2}.fansBadge-box a:hover{text-decoration:none;color:#429bd2}.fansBadge-detail{display:none;position:absolute;z-index:12;bottom:67px;left:-95px}.fansBadge-detail:after{position:absolute;left:50%;bottom:-5px;margin-left:-6px;width:12px;height:6px;content:"";background:url(https://a.msstatic.com/huya/main/widget/fansbadge/img/arr_213eb38.png)}.fansBadge-detail .fansBadge-box{width:260px;height:170px}.fansBadge-detail .fansBadge-more{position:absolute;right:13px;bottom:8px}.fansBadge-detail .fansBadge-detail-loading{padding-top:10px;text-align:center}.fansBadge-detail .fansBadge-detail-loading p{margin-top:8px}.fansBadge-detail .fansBadge-detail-empty{padding-top:10px;text-align:center}.fansBadge-detail .fansBadge-detail-empty .res{margin-top:8px}.fansBadge-detail .fansBadge-detail-empty .tip{margin-top:2px;color:#999}.fansBadge-detail .fansBadge-detail-null{padding-top:10px;text-align:center}.fansBadge-detail .fansBadge-detail-null .res{margin-top:8px}.fansBadge-detail .fansBadge-detail-null .tip{margin-top:2px;color:#999}.fansBadge-detail .fansBadge-detail-faithGuide{padding-top:10px}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider{position:relative;width:200px;margin:0 auto}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider .faithGuide-slider-bd{width:100%;overflow:hidden}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider .faithGuide-slider-bd ul{width:2333px;zoom:1;transition:margin .25s ease-out}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider .faithGuide-slider-bd ul:before,.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider .faithGuide-slider-bd ul:after{display:table;content:""}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider .faithGuide-slider-bd ul:after{clear:both}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider .faithGuide-slider-bd li{float:left;width:200px}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider .faithGuide-slider-bd li img{max-width:100%;height:auto}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider .faithGuide-slider-prev,.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider .faithGuide-slider-next{position:absolute;top:50%;width:8px;height:14px;margin-top:-7px;cursor:pointer}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider .faithGuide-slider-prev{left:-18px;background:url(https://a.msstatic.com/huya/main/widget/fansbadge/img/prev_326bed3.png)}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider .faithGuide-slider-prev:hover{background:url(https://a.msstatic.com/huya/main/widget/fansbadge/img/prev_act_b0afbf4.png)}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider .faithGuide-slider-next{right:-18px;background:url(https://a.msstatic.com/huya/main/widget/fansbadge/img/next_2764546.png)}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-slider .faithGuide-slider-next:hover{background:url(https://a.msstatic.com/huya/main/widget/fansbadge/img/next_act_2dd9aff.png)}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-text{margin-top:10px;text-align:center}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-ft{margin-top:10px;text-align:center}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-btn{display:inline-block;padding:0 1.2em;line-height:26px;border-radius:12px;background:#f80;color:#fff;text-decoration:none;cursor:pointer}.fansBadge-detail .fansBadge-detail-faithGuide .faithGuide-btn:hover{text-decoration:none;color:#fff;background:#f90}.fansBadge-detail .fansBadge-detail-badge{padding:0 10px}.fansBadge-detail .fansBadge-detail-badge .badge-icon{text-align:center}.fansBadge-detail .fansBadge-detail-badge .badge-score{margin-top:5px;zoom:1}.fansBadge-detail .fansBadge-detail-badge .badge-score:before,.fansBadge-detail .fansBadge-detail-badge .badge-score:after{display:table;content:""}.fansBadge-detail .fansBadge-detail-badge .badge-score:after{clear:both}.fansBadge-detail .fansBadge-detail-badge .badge-score .badge-lv{float:left;line-height:14px;min-width:28px}.fansBadge-detail .fansBadge-detail-badge .badge-score .badge-progress{float:left;margin-left:3px;position:relative;width:160px;height:14px;overflow:hidden;border-radius:7px;background:#E3E3E3}.fansBadge-detail .fansBadge-detail-badge .badge-score .badge-progress i{position:absolute;left:0;top:0;width:0;height:100%;max-width:100%;overflow:hidden;background:#f80}.fansBadge-detail .fansBadge-detail-badge .badge-score .badge-progress span{position:absolute;left:0;top:0;width:100%;line-height:14px;color:#fff;text-align:center}.fansBadge-detail .fansBadge-detail-badge .badge-score .fansBadge-qm{float:left;margin-left:6px}.fansBadge-detail .fansBadge-detail-badge .badge-rank{margin-top:8px}.fansBadge-detail .fansBadge-detail-badge .badge-update{margin-top:6px}.fansBadge-detail .fansBadge-detail-badge .badge-update .update-state{float:left;margin:4px 3px 0 0}.fansBadge-detail .fansBadge-detail-badge .badge-update .badge-update-up em{color:#f80}.fansBadge-detail .fansBadge-detail-badge .badge-update .badge-update-down em{color:#76bf72}.fansBadge-detail .fansBadge-detail-badge .badge-update .badge-update-in em{color:#7a90ae}.fansBadge-detail .fansBadge-detail-badgeFaith{padding:0 10px}.fansBadge-detail .fansBadge-detail-badgeFaith .badge-tit{vertical-align:middle}.fansBadge-detail .fansBadge-detail-badgeFaith .badge-tit .badge-name{display:inline-block;vertical-align:middle;line-height:20px;font-size:14px}.fansBadge-detail .fansBadge-detail-badgeFaith .badge-tit .fans-icon{vertical-align:middle;margin-left:8px}.fansBadge-detail .fansBadge-detail-badgeFaith .badge-score{margin-top:10px;zoom:1}.fansBadge-detail .fansBadge-detail-badgeFaith .badge-score:before,.fansBadge-detail .fansBadge-detail-badgeFaith .badge-score:after{display:table;content:""}.fansBadge-detail .fansBadge-detail-badgeFaith .badge-score:after{clear:both}.fansBadge-detail .fansBadge-detail-badgeFaith .badge-score .badge-feelings{float:left;line-height:14px;min-width:28px}.fansBadge-detail .fansBadge-detail-badgeFaith .badge-score .badge-progress{float:left;margin-left:3px;position:relative;width:160px;height:14px;overflow:hidden;border-radius:7px;background:#E3E3E3}.fansBadge-detail .fansBadge-detail-badgeFaith .badge-score .badge-progress i{position:absolute;left:0;top:0;width:0;height:100%;max-width:100%;overflow:hidden;background:#66F}.fansBadge-detail .fansBadge-detail-badgeFaith .badge-score .badge-progress span{position:absolute;left:0;top:0;width:100%;line-height:14px;color:#fff;text-align:center}.fansBadge-detail .fansBadge-detail-badgeFaith .badge-quota{margin-top:8px}.fansBadge-detail .fansBadge-detail-badgeFaith .badge-rank{margin-top:6px}.fansBadge-detail .fansBadge-detail-badgeFaith .badge-rank .update-state{margin-left:5px;position:relative;top:1px}.fansBadge-list{display:none;position:absolute;z-index:13;bottom:67px;left:156px}.fansBadge-list .fansBadge-box{width:181px}.fansBadge-list .fansBadge-items{max-height:245px;overflow:hidden}.fansBadge-list .fansBadge-items .jspPane{width:100%!important}.fansBadge-list li{padding:6px 10px;cursor:pointer;position:relative;overflow:hidden}.fansBadge-list li:hover{background:#f0f0f0}.fansBadge-list li.on{cursor:default}.fansBadge-list li.on:hover{background:#fff}.fansBadge-list li.on:after{content:"";position:absolute;top:50%;margin-top:-3.5px;right:6px;width:11px;height:7px;background:url(https://a.msstatic.com/huya/main/widget/fansbadge/img/on_51b7af1.png)}.fansBadge-list li .fans-icon{float:left;margin:-3px 10px 0 0}.fansBadge-list li .nick{float:left;max-width:8em;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.fansBadge-list .fansBadge-itemNull{display:block;padding:3px 0 8px 10px;color:#429bd2;cursor:pointer}.fansBadge-tip{display:none;position:absolute;z-index:11;bottom:67px;left:-1px;width:275px}.fansBadge-tip:after{position:absolute;left:50%;bottom:-5px;margin-left:-6px;width:12px;height:6px;content:"";background:url(https://a.msstatic.com/huya/main/widget/fansbadge/img/arr_213eb38.png)}.fansBadge-tip:after{left:37px}.fansBadge-tip .fansBadge-tip-new{padding:10px 15px}.fansBadge-tip .fansBadge-tip-up{padding:10px 15px}.fansBadge-tip .fansBadge-tip-ft{padding-top:8px;text-align:right}.fansBadge-tip .fansBadge-tip-ft a{padding-left:1.2em;color:#f80}.fansBadge-tip .fansBadge-tip-ft a:hover{text-decoration:underline}.ie8 .chat-fansbadge{height:48px}.chat-fansbadge .badge-null,.chat-fansbadge .badge-empty{position:absolute;top:8px;left:50%;margin-left:-21px;display:inline-block;width:42px;height:26px}.chat-fansbadge .badge-null{background:url(https://a.msstatic.com/huya/main/widget/fansbadge/img/null_b593d50.png)}.chat-fansbadge .badge-empty{background:url(https://a.msstatic.com/huya/main/widget/fansbadge/img/empty_868db3c.png)}.chat-fansbadge .fans-icon{position:absolute;top:50%;left:50%;margin:-11px 0 0 -24px}';tools.importStyle(cssText,"J_fansBadgeStyle");var tpl_badgeFaith=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u6211\u7684\u4fe1\u4ef0\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-box-bd">\r\n        <div class="fansBadge-detail-badgeFaith">\r\n            <p class="badge-tit"><span class="badge-name">'+(null==(__t=data.tFaithInfo.sFaithName)?"":__t)+"</span>"+(null==(__t=fansIcon.create(data.iBadgeLevel,data.tFaithInfo.sFaithName,data.lBadgeId,data.iBadgeType))?"":__t)+'</p>\r\n            <div class="badge-score">\r\n                <span class="badge-feelings">\u4fe1\u4ef0\u5ea6\uff1a</span>\r\n                <p class="badge-progress"><i style="width:'+(null==(__t=data.iScore/data.iNextScore*100)?"":__t)+'%;"></i><span>'+(null==(__t=data.iScore)?"":__t)+"/"+(null==(__t=data.iNextScore)?"":__t)+'</span></p>\r\n            </div>\r\n            <p class="badge-quota">\u4eca\u65e5\u6210\u957f\uff1a'+(null==(__t=data.iQuotaUsed)?"":__t)+"/"+(null==(__t=data.iQuota)?"":__t)+'</p>  \r\n            <p class="badge-rank">\u4fe1\u4ef0\u6392\u540d\uff1a<em class="fansBadge-hig">'+(null==(__t=data.iRank)?"":__t)+'</em><i class="fansBadge-stateUp update-state"></i></p>\r\n        </div>\r\n    </div>\r\n    <a class="fansBadge-more J_showfansBadgeList" href="#">\u5207\u6362\u5fbd\u7ae0 <i>&gt;</i></a>\r\n</div>';return __p},tpl_faithGuide=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-bd">\r\n        <div class="fansBadge-detail-faithGuide">\r\n            <div class="faithGuide-slider">\r\n                <div class="faithGuide-slider-bd">\r\n                    <ul class="J_list">\r\n                        ',$.each(data.tFaithItem.vFaithPic.value,function(a,e){__p+='\r\n                            <li><img src="'+(null==(__t=TT.trimUrl(e.replace("<ua>","3")))?"":__t)+'" /></li>\r\n                        '}),__p+="\r\n                    </ul>\r\n                </div>\r\n                ",data.tFaithItem.vFaithPic.value.length>1&&(__p+='\r\n                <div class="faithGuide-slider-ctrl">\r\n                    <span class="faithGuide-slider-prev J_prev" style="display: none;"></span>\r\n                    <span class="faithGuide-slider-next J_next"></span>\r\n                </div>\r\n                '),__p+='\r\n            </div>\r\n            <div class="faithGuide-text">\r\n                <p>'+(null==(__t=data.tFaithItem.sObtainWay)?"":__t)+"\u83b7\u53d6"+(null==(__t=data.tFaithItem.sFaithName)?"":__t)+(null==(__t=fansIcon.create(1,data.tFaithItem.sFaithName,data.lBadgeId,1))?"":__t)+"</p>\r\n                <p>\u5f70\u663e\u4f60\u5bf9"+(null==(__t=data.tFaithItem.sFaithContent)?"":__t)+'\u70bd\u70ed\u7684\u7231</p>\r\n            </div>\r\n            <div class="faithGuide-ft">\r\n                <span class="faithGuide-btn J_do">'+(null==(__t=data.tFaithItem.sActionName)?"":__t)+"</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>";return __p},tpl_badge=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u6211\u7684\u7c89\u4e1d\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-box-bd">\r\n        <div class="fansBadge-detail-badge">\r\n            <p class="badge-icon">'+(null==(__t=fansIcon.create(data.iBadgeLevel,data.sBadgeName,data.lBadgeId,data.iBadgeType))?"":__t)+'</p>\r\n            <div class="badge-score">\r\n                <span class="badge-lv">Lv'+(null==(__t=data.iBadgeLevel)?"":__t)+'</span>\r\n                <p class="badge-progress"><i style="width:'+(null==(__t=data.iScore/data.iNextScore*100)?"":__t)+'%;"></i><span>'+(null==(__t=data.iScore)?"":__t)+"/"+(null==(__t=data.iNextScore)?"":__t)+'</span></p>\r\n                <a class="fansBadge-qm" target="_blank" href="'+(null==(__t=TT.app.hd)?"":__t)+'0301fans/index.html"></a>\r\n            </div>\r\n            <p class="badge-rank">\u6392\u540d <em class="fansBadge-hig">'+(null==(__t=data.iRank)?"":__t)+'</em></p>\r\n            <div class="badge-update">\r\n            ',__p+=data.iQuotaUsed>0?'\r\n                <div class="badge-update-up">\r\n                    <p><i class="fansBadge-stateUp update-state"></i>\u4eca\u65e5\u4eb2\u5bc6\u5ea6<em>+'+(null==(__t=data.iQuotaUsed)?"":__t)+"</em></p>\r\n                    <p>\u4eca\u65e5\u4eb2\u5bc6\u5ea6\u4e0a\u6da8\u4e0a\u9650<em>"+(null==(__t=data.iQuotaUsed)?"":__t)+"/"+(null==(__t=data.iQuota)?"":__t)+"</em></p>\r\n                </div>\r\n            ":data.iQuotaUsed<0?'\r\n                <div class="badge-update-down">\r\n                    <p><i class="fansBadge-stateDown update-state"></i>\u4eca\u65e5\u4eb2\u5bc6\u5ea6<em>'+(null==(__t=data.iQuotaUsed)?"":__t)+"</em>\uff0c\u51cf\u5c11\u52300\u5c06\u5931\u53bb\u5fbd\u7ae0</p>\r\n                    <p>\u8d60\u9001\u4e3b\u64ad\u793c\u7269\uff0c\u4eb2\u5bc6\u5ea6\u4f1a\u91cd\u65b0\u4e0a\u6da8~</p>                \r\n                </div>\r\n            ":'\r\n                <div class="badge-update-in">\r\n                    <p><i class="fansBadge-stateStop update-state"></i>\u4eca\u65e5\u4eb2\u5bc6\u5ea6<em>+'+(null==(__t=data.iQuotaUsed)?"":__t)+"</em>\uff0c\u8fde\u7eed7\u5929\u65e0\u589e\u957f\uff0c\u4eb2\u5bc6\u5ea6\u4f1a\u4e0b\u964d\u54e6\uff01</p>\r\n                </div>\r\n            ",__p+='\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <a class="fansBadge-more J_showfansBadgeList" href="#">\u5207\u6362\u5fbd\u7ae0 <i>&gt;</i></a>\r\n</div>';return __p},tpl_null=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\n    <div class="fansBadge-box-hd">\u6211\u7684\u7c89\u4e1d\u5fbd\u7ae0</div>\n    <div class="fansBadge-box-bd">\n        <div class="fansBadge-detail-null">\n            <img src="'+(null==(__t="https://a.msstatic.com/huya/main/widget/fansbadge/img/a_cf56f98.png")?"":__t)+'" />\n            <p class="res">\u5f53\u524d\u6ca1\u6709\u4f69\u6234\u5fbd\u7ae0 <a class="fansBadge-qm" target="_blank" href="'+(null==(__t=TT.app.hd)?"":__t)+'0301fans/index.html"></a></p>\n            <p class="tip">\u60a8\u6709<em class="fansBadge-hig">'+(null==(__t=total)?"":__t)+'\u4e2a</em>\u53ef\u4f69\u6234\u7684\u5fbd\u7ae0\u54e6\uff01</p>\n        </div>\n    </div>\n    <a class="fansBadge-more J_showfansBadgeList" href="#">\u5207\u6362\u5fbd\u7ae0 <i>&gt;</i></a>\n</div>';return __p},tpl_empty=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u6211\u7684\u7c89\u4e1d\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-box-bd">\r\n        <div class="fansBadge-detail-empty">\r\n            <img src="'+(null==(__t="https://a.msstatic.com/huya/main/widget/fansbadge/img/c_b6c5cf4.png")?"":__t)+'" />\r\n            <p class="res">\u60a8\u6ca1\u6709\u5fbd\u7ae0\u53ef\u4f69\u6234 <a class="fansBadge-qm" target="_blank" href="'+(null==(__t=TT.app.hd)?"":__t)+'0301fans/index.html"></a></p>\r\n            ',__p+=data.lBadgeId&&data.sBadgeName?'\r\n                <p class="tip">\u4e00\u6b21\u6027\u9001<em class="fansBadge-hig">10\u4e2a\u8367\u5149\u68d2</em>\u53ef\u4ee5\u6210\u4e3a\u7c89\u4e1d\uff0c<br />\u83b7\u5f97\u5fbd\u7ae0: '+(null==(__t=fansIcon.create(1,data.sBadgeName,data.lBadgeId,data.iBadgeType))?"":__t)+"</p>\r\n            ":'\r\n                <p class="tip">\u5f53\u524d\u4e3b\u64ad\u8fd8\u6ca1\u6709\u5f00\u901a\u7c89\u4e1d\u5fbd\u7ae0</p>\r\n            ',__p+='\r\n        </div>\r\n    </div>\r\n    <a class="fansBadge-more" target="_blank" href="'+(null==(__t=TT.app.hd)?"":__t)+'0301fans/index.html">\u8be6\u60c5 <i>&gt;</i></a>\r\n</div>';return __p},tpl_loading=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\n    <div class="fansBadge-box-hd">\u6211\u7684\u7c89\u4e1d\u5fbd\u7ae0</div>\n    <div class="fansBadge-box-bd">\n        <div class="fansBadge-detail-loading">\n            <img src="'+(null==(__t="https://a.msstatic.com/huya/main/widget/fansbadge/img/b_f77bd96.png")?"":__t)+'" />\n            <p>\u52aa\u529b\u83b7\u53d6\u6570\u636e\u4e2d\uff0c\u8bf7\u7a0d\u7b49\u7247\u523b <a class="fansBadge-qm" target="_blank" href="'+(null==(__t=TT.app.hd)?"":__t)+'0301fans/index.html"></a></p>\n        </div>\n    </div>\n    <a class="fansBadge-more" target="_blank" href="'+(null==(__t=TT.app.hd)?"":__t)+'0301fans/index.html">\u8be6\u60c5 <i>&gt;</i></a>\n</div>';return __p},tpl_list=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-box-hd">\u9009\u62e9\u4f60\u8981\u4f69\u6234\u7684\u5fbd\u7ae0</div>\r\n    <div class="fansBadge-items">\r\n        <ul>\r\n        ';for(var i=0,l=data.length;l>i;i++){var badge=data[i];__p+="\r\n            <li"+(null==(__t=currenBadge&&currenBadge.lBadgeId==badge.lBadgeId?' class="on"':"")?"":__t)+">\r\n                "+(null==(__t=fansIcon.create(badge.iBadgeLevel,1==badge.iBadgeType?badge.tFaithInfo.sFaithName:badge.sBadgeName,badge.lBadgeId,badge.iBadgeType))?"":__t)+'\r\n                <span class="nick">'+(null==(__t=1==badge.iBadgeType?badge.tFaithInfo.sFaithName:badge.sPresenterNickName)?"":_.escape(__t))+"</span>\r\n            </li>\r\n        "}__p+='\r\n        </ul>\r\n    </div>\r\n    <a class="fansBadge-itemNull" href="#">\u4e0d\u4f69\u6234\u4efb\u4f55\u5fbd\u7ae0</a>\r\n</div>'}return __p},tpl_up=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-tip-up">\r\n        <p>\u606d\u559c\u60a8\u62e5\u6709\u7684 '+(null==(__t=fansIcon.create(data.iBadgeLevel,1==data.iBadgeType?data.tFaithInfo.sFaithName:data.sBadgeName,data.lBadgeId,data.iBadgeType))?"":__t)+' \u7c89\u4e1d\u5fbd\u7ae0\u5347\u7ea7\u4e86\uff01</p>\r\n        <div class="fansBadge-tip-ft">\r\n            <a href="#" class="J_fansBadgeTipClose">\u6211\u77e5\u9053\u4e86(<i class="J_fansBadgeTipCd">'+(null==(__t=timeout)?"":__t)+"</i>)</a>\r\n        </div>\r\n    </div>\r\n</div>";return __p},tpl_new=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="fansBadge-box">\r\n    <div class="fansBadge-tip-new">\r\n        <p>\u606d\u559c\u60a8\u83b7\u5f97 '+(null==(__t=fansIcon.create(data.iBadgeLevel,1==data.iBadgeType?data.tFaithInfo.sFaithName:data.sBadgeName,data.lBadgeId,data.iBadgeType))?"":__t)+' \u7c89\u4e1d\u5fbd\u7ae0\uff01</p>\r\n        <div class="fansBadge-tip-ft">\r\n            <a href="#" class="J_fansBadgeTipUse">\u7acb\u5373\u4f69\u6234</a>\r\n            <a href="#" class="J_fansBadgeTipClose">\u5173\u95ed</a>\r\n        </div>\r\n    </div>\r\n</div>';return __p},badgeReady=$.Deferred();if(HUYA_UTIL.getCookieVal("yyuid"))init(function(a,e){badgeReady.resolve(a,e)});else{var badge=new Badge({vBadgeInfo:{value:[]}});$("#J_chatFansBadge").removeClass("chat-fansbadge-loading").html('<i class="badge-null"></i>'),getBadgeItem(TTA.lp,function(a){badgeReady.resolve(badge,a)})}return{ready:function(a){badgeReady.done(a)}}});