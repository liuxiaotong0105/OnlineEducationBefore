define("widget/sidebar",function(e,i,a){function t(e){function i(){if("undefined"==typeof ya)return void(a=setTimeout(function(){i()},1e3));clearTimeout(a);var t=$.extend({},!0,{ref:YA.cookie.get("ya_eid")},e);ya.reportProductEvent(t)}var a;i()}function n(e){var i=e.sidebar();o.on("click",".clickstat",function(){t({eid:"click/zuoce/"+o.data("source"),eid_desc:"\u70b9\u51fb/\u5de6\u5bfc\u822a/"+o.data("source")})}).on("click",".nav-bar",function(a){var n=$(this),r=n.find(".nav-child"),s=!1,d=$(a.target);if($.each(d,function(e,i){var a=$(i);s=a.parents(".nav-bar-match").length>0&&!a.hasClass("nav-arrow")}),r.length&&!s){var c=n.hasClass("show");n.hasClass("nav-bar-match")?(i.setMatchState(c?i.STATE_CTRL.STATE_HIDE:i.STATE_CTRL.STATE_SHOW),t({eid:"click/zuoce/"+o.data("source"),eid_desc:"\u70b9\u51fb/\u5de6\u5bfc\u822a/"+o.data("source")}),t({eid:"click/zuoce/game/"+(c?"close":"open")+"/"+n.data("source"),eid_desc:"\u70b9\u51fb/\u5de6\u5bfc\u822a/\u8d5b\u4e8b/"+(c?"\u6536\u8d77":"\u5c55\u5f00")+"/"+n.data("source")})):r.slideToggle("slow",function(){c?n.removeClass("show"):n.addClass("show"),e.sidebarScrollFn()})}}).on("click","#sidebar-show-btn, #sidebar-hide-btn",function(){i.set.cfg({matchStatus:1}),i.setSidebarState(i.cfg().state==i.STATE_CTRL.STATE_HIDE?i.STATE_CTRL.STATE_SHOW:i.STATE_CTRL.STATE_HIDE)}),TT.login.check(function(e){e?o.find(".subscribe-text").remove():o.find(".js-sub").on("click",function(){return TT.login.login(),!1})})}function r(){this.initialize.apply(this,arguments)}function s(e){var i=this;i.obj=e;var a=1;0!==$(".on-match").length&&(a=0);var t=new d({gid:e.gid,firstState:a});i.sidebar=function(){return t},t.on("update:cfg:state",function(){var e=t.cfg().state;if(1==e){h.hide(),u.show(),DUYA_SUB.publish("sidebarShow");var i=$("#sidebarBanner").data("thirdview");i&&banner.viewReport(i)}else h.show(),u.hide(),DUYA_SUB.publish("sidebarHide");DUYA_SUB.publish("resizeWide")}),t.on("update:cfg:matchState",function(){var e=t.cfg().matchState,a=$(".nav-bar-match");e?a.find(".nav-child").slideDown("slow",function(){a.addClass("show"),i.sidebarScrollFn()}):a.find(".nav-child").slideUp("slow",function(){a.removeClass("show"),i.sidebarScrollFn()})}),i.initialize.apply(i,arguments)}e("jScrollPane");var d=e("sidebar"),o=$(".mod-sidebar"),c=$(".sidebar-recom"),l=o.find("#sidebar-scroll"),h=o.find(".sidebar-hide"),u=o.find(".sidebar-show");r.prototype={initialize:function(e){var i=this;i.view=function(){return e},i.ad=e.sidebar().ad(),i.ad.on("update",function(){var e=i.ad.cfg().data;e&&i.createImage(e)}),i.ad.emit("update")},createImage:function(e){var i=this;$(".sidebar-banner").show(),$("#sidebarBanner").attr({href:e.link,title:e.title,target:"_blank"}).data("thirdstat",e.clickCheckCode).data("thirdview",e.viewCheckCode).html('<img src="'+TT.trimUrl(e.picUrl)+'" alt="'+e.title+'" width="200" height="80">'),TT_RSC_EXPS({pos:"sidebar/banner",rsc:e.id}),setTimeout(function(){i.viewReport(e.viewCheckCode)},2e3),i.view().sidebarScrollFn()},viewReport:function(e){var i=this,a=$(".mod-sidebar .sidebar-show");"none"!=a.css("display")&&(!function(){var i=e;if(i){var a=a||new Image;a.src=i}}(),function(){function e(){return"undefined"==typeof ya?void(a=setTimeout(function(){e()},1e3)):(clearTimeout(a),ya.reportProductEvent({eid:"pageview/push/leftnaviad",eid_desc:"\u66dd\u5149/\u63a8\u8350/\u5de6\u4fa7\u5bfc\u822a\u680f\u5e7f\u544a\u4f4d",ref:YA.cookie.get("ya_eid")}),void(i.viewReport=function(){return 0}))}var a;e()}())}},p_view=s.prototype,p_view.initialize=function(){{var e=this;new r(e)}n(e),DUYA_SUB.subscribe("sidebarShow",function(){e.sidebarScrollFn(),$("#J_mainWrap").css("padding-left",220)}),DUYA_SUB.subscribe("sidebarHide",function(){$("#J_mainWrap").css("padding-left",50)}),e.sidebar().emit("update:cfg:state"),e.sidebar().emit("update:cfg:matchState"),e.highlight(),e.sidebarScrollFn(),e.resizeFn(),e.matchSpecially(),e.autoReport()},p_view.autoReport=function(){var e=this,i=e.sidebar().cfg(),a=i.state==e.sidebar().STATE_CTRL.STATE_SHOW?{eid:"open",eid_desc:"\u5c55\u5f00"}:{eid:"close",eid_desc:"\u5173\u95ed"};t({eid:"status/zuoce/"+a.eid,eid_desc:"\u72b6\u6001/\u5de6\u5bfc\u822a/"+a.eid_desc})},p_view.highlight=function(){var e=c.find(".on").parents(".m");e.length>0&&e.addClass("m-on-bg");var i=window.location.host+window.location.pathname;o.find(".sidebar-show-nav").find(".nav-bar").each(function(){var e=$(this);e.attr("href")&&e.attr("href").split("//")[1]==i&&e.addClass("on")}),o.find(".sidebar-icon-link").each(function(){var e=$(this);e.attr("href")&&e.attr("href").split("//")[1]==i&&e.parents(".sidebar-icon-item").addClass("on")}),o.find(".sidebar-show-nav").find(".nav-child-item").each(function(){var e=$(this);if(e.attr("href")&&e.attr("href").split("//")[1]==i){e.addClass("on");var a=e.parents(".nav-bar"),t=a.data("nav");a.addClass("on"),o.find(".sidebar-item-"+t).addClass("on")}})},p_view.sidebarScrollFn=function(){var e=l.data("jsp");if(l.height(u.height()-130),e)return void e.reinitialise();if($.isFunction($.fn.jScrollPane))l.jScrollPane({scrollbarWidth:6,mouseWheelSpeed:20,verticalGutter:0});else{var i="https://a.msstatic.com/huya/main/lib/scrollpane_00c6b15.js";$.ajax(i,{dataType:"script",cache:!0,success:function(){$.isFunction($.fn.jScrollPane)&&l.jScrollPane({scrollbarWidth:6,mouseWheelSpeed:20,verticalGutter:0})}})}},p_view.resizeFn=function(){var e=o.find(".sidebar-icon-author"),i=this,a=$(window);a.on("resize.sidebar",function(){i.sidebarScrollFn(),a.height()<620?e.hide():e.show()})},p_view.matchSpecially=function(){function e(){var e=i.sidebar().cfg().matchStatus;-1===e&&(a.width()<=1366?i.sidebar().setSidebarState(i.sidebar().STATE_CTRL.STATE_HIDE):"1"==window.localStorage.getItem("sidebar/state")&&i.sidebar().setSidebarState(i.sidebar().STATE_CTRL.STATE_SHOW))}var i=this;if(0!==$(".on-match").length){var a=$(window),t=null;e(),a.resize(function(){clearTimeout(t),t=setTimeout(function(){e()},60)})}},p_view.constructor=s,a.exports=s});