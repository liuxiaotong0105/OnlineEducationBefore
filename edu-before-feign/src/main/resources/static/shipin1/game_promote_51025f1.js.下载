define("widget/game_promote",function(require,exports,module){function Board(){function e(){t.show()}function o(){t.hide()}var t=$(".J_gamePromoteContainer"),a=new $.Callbacks;return t.on("click",".J_gamePromoteX",function(e){e.preventDefault(),o(),a.fire()}),{open:e,close:o,onClickClose:function(e){a.add(e)}}}function getData(e){$.ajax({url:TT.app.main+"cache.php?m=MobileGameApi&do=getWebMobileGameInfo",type:"GET",dataType:"json",data:{gameId:TTR.gid,pid:TTA.lp},success:function(o){o&&200==o.status&&o.data&&o.data.length&&o.data[0]&&o.data[0].codepic_url&&e(o.data[0])}})}var TTR=require("TTR"),TTA=require("TTA"),tools=require("tools");getData(function(data){var tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="gamePromote J_gamePromote">\n    <div class="gamePromote-hd">\n        <span class="gamePromote-tit">\u4e0b\u8f7d\u6e38\u620f</span>\n    </div>   \n    <div class="gamePromote-bd J_gamePromoteContainer">\n        <div class="gamePromote-cont">\n            <div class="board">\n                <div class="board-hd">\u5feb\u6765\u8ddf\u4e3b\u64ad\u4e00\u8d77\u73a9</div>\n                <div class="board-bd">\n                    <p class="board-game">'+(null==(__t=data.game_name)?"":_.escape(__t)),1==data.gift_display&&(__p+="<i></i>"),__p+='</p>\n                    <div class="board-qrcode">\n                        <img src="'+(null==(__t=TT.trimUrl(data.codepic_url))?"":__t)+'" alt="'+(null==(__t=data.game_name)?"":_.escape(__t))+'" />\n                    </div>\n                    <p class="board-des">\u626b\u63cf\u4e8c\u7ef4\u7801\u4e0b\u8f7d\u6e38\u620f</p>\n                </div>\n            </div>\n        </div>\n        <i class="gamePromote-x J_gamePromoteX"></i>\n    </div>\n</div>\n';return __p},css='@charset "UTF-8";.room-hd-small .gamePromote{display:none}.gamePromote{word-wrap:normal;float:right;position:relative;color:#888;margin-left:15px}.gamePromote .gamePromote-tit{display:inline-block;cursor:pointer;position:relative;padding-left:19px;line-height:26px}.gamePromote .gamePromote-tit:before{content:"";position:absolute;left:0;top:5px;width:17px;height:15px;overflow:hidden;background:url(https://a.msstatic.com/huya/main/widget/game_promote/img/a_354a45d.png?__sprite)}.gamePromote .gamePromote-bd{display:none;position:absolute;right:0;top:30px;background:#fff;color:#555;box-shadow:0 5px 10px 0 rgba(1,1,1,.2);border:1px solid #e0e0e0;border-top:2px solid #ff8a00;border-radius:0 0 5px 5px}.gamePromote .gamePromote-bd:before{content:"";position:absolute;top:-7px;right:20px;width:13px;height:7px;background:url(https://a.msstatic.com/huya/main/widget/game_promote/img/d_a03ee19.jpg?__sprite)}.gamePromote .gamePromote-bd:after{content:"";position:absolute;top:-7px;left:0;width:100%;height:10px}.gamePromote .gamePromote-bd .gamePromote-x{display:none;position:absolute;top:15px;right:12px;width:11px;height:10px;overflow:hidden;background:url(https://a.msstatic.com/huya/main/widget/game_promote/img/c_74b4dfc.png?__sprite);cursor:pointer}.gamePromote .gamePromote-bd .gamePromote-x:hover{background:url(https://a.msstatic.com/huya/main/widget/game_promote/img/cc_07b474d.png?__sprite)}.gamePromote .board{width:180px;background:#fff}.gamePromote .board .board-hd{padding-top:10px;background:#fff;text-align:center;font-size:14px}.gamePromote .board .board-game{padding:10px 0 5px;line-height:16px;text-align:center;font-size:14px;color:#000}.gamePromote .board .board-game i{display:inline-block;margin-left:3px;width:15px;height:16px;overflow:hidden;background:url(https://a.msstatic.com/huya/main/widget/game_promote/img/b_01b4c4b.png?__sprite);vertical-align:bottom}.gamePromote .board .board-qrcode{text-align:center}.gamePromote .board .board-qrcode img{width:130px;height:130px}.gamePromote .board .board-des{color:#999;padding:6px 0 13px;text-align:center;font-size:14px}.gamePromote.passiveTrigger .board-hd{padding-left:15px;text-align:left}.gamePromote.passiveTrigger .gamePromote-x{display:block}';tools.importStyle(css,"J_roomGamePromoteStyle"),$(".J_roomHdCtrlOther").prepend(tpl({data:data})),TT.emit("ROOM_HEADER_CTRL_RESIZE");var board=new Board,isNormal=!0,timer=null;try{var key="TT_GAME_"+TTR.gid+"_PROMOTE";localStorage.getItem(key)||(timer=setTimeout(function(){isNormal=!1,$(".J_gamePromote").addClass("passiveTrigger"),board.open();try{ya.reportProductEvent({eid:"click/room/web/game/psitips",eid_desc:"\u70b9\u51fb/\u76f4\u64ad\u95f4/\u6e38\u620f\u4e0b\u8f7d\u5165\u53e3/\u88ab\u52a8\u89e6\u53d1"})}catch(e){}board.onClickClose(function(){localStorage.setItem(key,"1"),$(".J_gamePromote").removeClass("passiveTrigger"),isNormal=!0;try{ya.reportProductEvent({eid:"click/room/web/game/closetips",eid_desc:"\u70b9\u51fb/\u76f4\u64ad\u95f4/\u6e38\u620f\u4e0b\u8f7d\u5165\u53e3/\u5173\u95ed"})}catch(e){}})},TT.isProd?6e4:6e3))}catch(e){}$(".J_gamePromote").on("mouseenter",function(){if(isNormal){board.open();try{ya.reportProductEvent({eid:"click/room/web/game/initips",eid_desc:"\u70b9\u51fb/\u76f4\u64ad\u95f4/\u6e38\u620f\u4e0b\u8f7d\u5165\u53e3/\u4e3b\u52a8\u89e6\u53d1"})}catch(e){}null!==timer&&clearTimeout(timer)}}).on("mouseleave",function(){isNormal&&board.close()})})});