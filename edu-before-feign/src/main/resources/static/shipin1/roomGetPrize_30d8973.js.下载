define("widget/roomGetPrize",function(require,exports,module){function GetRequest(t){var e=new Object;if(-1!=t.indexOf("?")){var a=t.substr(t.indexOf("?")+1);strs=a.split("&");for(var r=0;r<strs.length;r++)e[strs[r].split("=")[0]]=decodeURIComponent(strs[r].split("=")[1])}return e}var dialog=require("widget/dialog"),tools=require("tools"),cssText='@charset "UTF-8";.treasure-box{position:relative;overflow:hidden;width:447px;height:540px;margin-top:50px;background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/bg_treasure_cc5332f.png) no-repeat}.treasure-box .wrap{margin:175px auto 0;width:390px;height:350px}.treasure-box .hd{height:73px;text-align:center;color:#666}.treasure-box .hd .title{color:#5d6260;font-size:14px;line-height:36px}.treasure-box .hd .prize-name{font-size:20px;font-weight:700;color:#ff5062}.treasure-box .hd .tip{line-height:20px}.treasure-box .form-box .form-list{padding-top:13px;width:358px}.treasure-box .form-box .form-item{margin-top:13px;height:34px;line-height:34px;border:1px solid #f0df85;border-radius:14px}.treasure-box .form-box .item-name{font-size:14px;color:#999;padding-left:20px}.treasure-box .form-box .form-item input{padding:8px 0 8px 10px;font-size:14px;line-height:18px;width:280px;background:0 0;border:0;outline:0}.treasure-box .card-box .card-inner{margin-top:20px;width:373px;height:183px;overflow:hidden;background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/bg_card_0868abd.png)}.treasure-box .card-box .card-wrap{margin:20px auto 0;width:280px;height:140px;border:2px solid #f4eabe;border-radius:10px}.treasure-box .card-box .card-info{width:240px;height:79px;margin:0 auto;padding:21px 0 0 20px;font-size:14px;line-height:27px;color:#ff7f00}.treasure-box .card-box .card-info .mark{font-weight:700}.treasure-box .card-box .card-tip{height:39px;line-height:39px;border-top:2px solid #f4eabe;font-size:12px;text-align:center;color:gray}.treasure-box .btn-close{position:absolute;right:16px;top:109px;width:16px;height:16px;background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/btn_close_0ce61ec.png);cursor:pointer}.treasure-box .btn-close:hover{background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/btn_close_hover_fce60d5.png)}.treasure-box .operation{position:relative;padding-top:16px}.treasure-box .btn-operation{display:block;margin:0 auto;width:140px;height:47px;cursor:pointer}.treasure-box .btn-submit{background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/btn_submit_db01223.png)}.treasure-box .btn-submit:hover{background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/btn_submit_hover_fa22ba8.png)}.treasure-box .btn-ok{display:block;margin:0 auto;width:140px;height:47px;background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/btn_ok_0b2a445.png);cursor:pointer}.treasure-box .btn-ok:hover{background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/btn_ok_hover_bcf6dee.png)}.treasure-box .help{position:absolute;right:52px;top:30px;color:#09f;font-size:12px}.treasure-box .help .icon{float:left;margin:2px 2px 0 0;width:14px;height:14px;background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/icon_intro_919550e.png)}.treasure-box5{position:relative;overflow:hidden;width:447px;height:540px;margin-top:50px;background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/bg_treasure_cc5332f.png) no-repeat}.treasure-box5 .wrap{margin:175px auto 0;width:390px;height:350px}.treasure-box5 .hd{height:73px;text-align:center;color:#666}.treasure-box5 .hd .title{color:#5d6260;font-size:14px;line-height:36px}.treasure-box5 .hd .prize-name{font-size:20px;font-weight:700;color:#ff5062}.treasure-box5 .hd .tip{line-height:20px}.treasure-box5 .card-box .card-inner{margin-top:20px;width:373px;height:183px;overflow:hidden;background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/bg_card_0868abd.png)}.treasure-box5 .card-box .prize-em{line-height:180px;font-size:16px;font-weight:700;color:#f80;text-align:center}.treasure-box5 .box5-close{position:absolute;right:16px;top:109px;width:16px;height:16px;background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/btn_close_0ce61ec.png);cursor:pointer}.treasure-box5 .box5-close:hover{background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/btn_close_hover_fce60d5.png)}.treasure-box5 .operation{position:relative;padding-top:16px}.treasure-box5 .btn-sure{display:block;margin:0 auto;width:140px;height:47px;background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/btn_ok_0b2a445.png);cursor:pointer}.treasure-box5 .btn-sure:hover{background:url(https://a.msstatic.com/huya/main/widget/roomGetPrize/img/btn_ok_hover_bcf6dee.png)}';tools.importStyle(cssText,"J_roomGetPrizeStyle");var tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="treasure-box">\n    <i class="btn-close" title="\u5173\u95ed"></i>\n    <div class="wrap">\n        <div class="hd">\n            <h2 class="title">\u606d\u559c\u4f60\u83b7\u5f97 <span class="prize-name">'+(null==(__t=data.prizeName)?"":__t)+'</span></h2>\n            <p class="tip">\u4f60\u8fd8\u53ef\u4ee5\u524d\u5f80\u4e2a\u4eba\u4e2d\u5fc3-\u4e2d\u5956\u67e5\u8be2\uff0c\u53ef\u518d\u6b21\u67e5\u770b\u548c\u586b\u5199</p>\n        </div>\n        <div class="bd">\n            ',"1"==data.type?__p+='\n            <div class="form-box">\n                <form id="treasure-form">\n                    <ul class="form-list">  \n                        <li class="form-item">\n                            <span class="item-name">\u59d3\u540d\uff1a</span><input type="text" name="name" maxlength="20">\n                        </li>\n                        <li class="form-item">\n                            <span class="item-name">QQ&nbsp;\uff1a</span><input type="text" name="qq" maxlength="20">\n                        </li>\n                        <li class="form-item">\n                            <span class="item-name">\u7535\u8bdd\uff1a</span><input type="text" name="phone" maxlength="20">\n                        </li>\n                        <li class="form-item">\n                            <span class="item-name">\u5730\u5740\uff1a</span><input type="text" name="address" maxlength="50">\n                        </li>\n                        <input type="hidden" name="matchId" value="'+(null==(__t=data.matchId)?"":__t)+'"> \n                    </ul>\n                    <div class="operation">\n                        <a class="btn-operation btn-submit"></a>\n                        <a class="help" href="'+(null==(__t=data.url)?"":__t)+'" target="_blank"><i class="icon"></i>\u5151\u6362\u8bf4\u660e</a>\n                    </div>\n                </form>\n            </div>\n            ':(__p+='\n            <div class="card-box">\n                <div class="card-inner">\n                    <div class="card-wrap">\n                        <div class="card-info">\n                            <p><span class="mark">\u5361\u53f7\uff1a</span>'+(null==(__t=data.code)?"":__t)+"</p>\n                            ","undefined"!=typeof data.pass&&""!=data.pass&&(__p+='\n                                <p><span class="mark">\u5361\u5bc6\uff1a</span>'+(null==(__t=data.pass)?"":__t)+"</p>\n                            "),__p+='\n                        </div>\n                        <p class="card-tip">\u8bf7\u59a5\u5584\u4fdd\u7ba1\u4f60\u7684\u5361\u53f7',"undefined"!=typeof data.pass&&""!=data.pass&&(__p+="\u548c\u5361\u5bc6"),__p+='\uff0c\u8c28\u9632\u6cc4\u9732</p>\n                    </div>\n                </div>\n                <div class="operation">\n                    <a class="btn-operation btn-ok"></a>\n                    <a class="help" href="'+(null==(__t=data.url)?"":__t)+'" target="_blank"><i class="icon"></i>\u5151\u6362\u8bf4\u660e</a>\n                </div>\n            </div>\n            '),__p+="\n        </div>\n    </div>\n</div>\n";return __p},layer=null;$(document).on("click",".treasure-box .btn-submit",function(){var t=$("#treasure-form")[0],e=validataFunc(t);return e?(alert(e),!1):void $.ajax({url:"//activity.huya.com/awardcom/index.php?m=Api&do=signAwardUserInfo",dataType:"jsonp",data:$("#treasure-form").serialize()}).done(function(t){200==t.status?(alert("\u63d0\u4ea4\u6210\u529f"),$(".treasure-box .btn-close").click()):alert(t.msg)})}),$(document).on("click",".treasure-box .btn-close,.treasure-box .btn-ok",function(){layer&&(layer.close(),layer=null)});var strategies={isNonEmpty:function(t,e){return""==$.trim(t)?e:void 0},isQQ:function(t,e){return/(^\d+$)/.test(t)?void 0:e},isMobile:function(t,e){return/(^\d{11}$)/.test(t)?void 0:e}},Validator=function(){this.cache=[]};Validator.prototype.add=function(t,e){for(var a,r=this,i=0;a=e[i++];)!function(e){var a=e.strategy.split(":"),i=e.errorMsg;r.cache.push(function(){var e=a.shift();return a.unshift(t.value),a.push(i),strategies[e].apply(t,a)})}(a)},Validator.prototype.start=function(){for(var t,e=0;t=this.cache[e++];){var a=t();if(a)return a}};var validataFunc=function(t){var e=t,a=new Validator;a.add(e.name,[{strategy:"isNonEmpty",errorMsg:"\u8bf7\u8f93\u5165\u60a8\u7684\u59d3\u540d"}]),a.add(e.qq,[{strategy:"isNonEmpty",errorMsg:"\u8bf7\u8f93\u5165\u60a8\u7684QQ\u53f7\u7801"},{strategy:"isQQ",errorMsg:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684QQ\u53f7\u7801"}]),a.add(e.phone,[{strategy:"isNonEmpty",errorMsg:"\u8bf7\u8f93\u5165\u60a8\u7684\u624b\u673a\u53f7\u7801"},{strategy:"isMobile",errorMsg:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801"}]),a.add(e.address,[{strategy:"isNonEmpty",errorMsg:"\u8bf7\u8f93\u5165\u60a8\u7684\u5730\u5740"}]);var r=a.start();return r},tpl_type5=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{})__p+='<div class="treasure-box5">\n    <i class="box5-close J_close" title="\u5173\u95ed"></i>\n    <div class="wrap">\n        <div class="hd">\n            <h2 class="title">\u606d\u559c\u4f60\u83b7\u5f97 <span class="prize-name">'+(null==(__t=data.prizeName)?"":_.escape(__t))+'</span></h2>\n            <p class="tip">\u4f60\u8fd8\u53ef\u4ee5\u524d\u5f80\uff1a\u4e2a\u4eba\u4e2d\u5fc3-\u6211\u7684\u8d22\u4ea7\uff0c\u518d\u6b21\u67e5\u770b</p>\n        </div>\n        <div class="bd">\n            <div class="card-box">\n                <div class="card-inner">\n                    <div class="prize-em">'+(null==(__t=data.prizeName)?"":_.escape(__t))+'</div>\n                </div>\n                <div class="operation">\n                    <a class="btn-sure J_close"></a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>';return __p};return function(t){var e=t.sUrl,a=GetRequest(e);if(5==a.type){var r=dialog.layer({view:tpl_type5({data:a}),zIndex:30001});r.view.on("click",".J_close",function(t){t.preventDefault(),r.close(),r=null})}else(1==a.type||2==a.type||3==a.type)&&(layer&&(layer.close(),layer=null),layer=dialog.layer({view:tpl({data:a}),zIndex:30001}),$('input[name="name"]').focus())}});