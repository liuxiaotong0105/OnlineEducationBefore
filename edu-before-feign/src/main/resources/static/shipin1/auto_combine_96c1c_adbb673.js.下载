define("Event",function(){function t(){return{fired:!1,data:[],callbacks:new $.Callbacks}}function n(){function n(n,r,a){if(!i(n)||!e(r))return this;var c=u[n]||(u[n]=new t);return c.callbacks.add(r),a&&c.fired&&r.apply(this,c.data),this}function r(n){if(!i(n))return this;var e=u[n]||(u[n]=new t);return e.fired=!0,e.data=a.call(arguments,1),e.callbacks.fireWith(this,e.data),"ALL"!==n&&r.apply(this,["ALL"].concat(a.call(arguments))),this}function c(t,n){var r=arguments.length;if(0===r)for(var a in u)u.hasOwnProperty(a)&&u[a].callbacks.empty();else if(i(t)){var c=u[t];c&&(1===r?c.callbacks.empty():e(n)&&c.callbacks.remove(n))}return this}function f(t,r,a){if(!i(t)||!e(r))return this;var f=function(){r.apply(this,arguments),c(t,f)};n(t,f,a)}var u={};return{on:n,one:f,off:c,emit:r}}var r=[],a=r.slice,e=function(t){return"function"==typeof t},i=function(t){return"string"==typeof t};return n});
;define("tools",function(n,e){{var t=e.once=function(n){var e,t;return function(){return t||(t=!0,e=n.apply(this,arguments)),e}},o=e.lazyPromise=function(n){var e=t(function(){var e=new $.Deferred;return n(function(){e.resolveWith(this,arguments)},function(){e.rejectWith(this,arguments)}),function(n,t){return e.done(n).fail(t).promise()}});return function(n,t){return e()(n,t)}},r=e.getScript=function(n,e,t){function o(){r(),"function"==typeof e&&e()}function r(){c.onload=c.onreadystatechange=c.onerror=null,c=null}var a=document,u=a.head||a.getElementsByTagName("head")[0]||a.documentElement,c=a.createElement("script");"onload"in c?c.onload=o:c.onreadystatechange=function(){/loaded|complete/.test(c.readyState)&&o()},"onerror"in c&&(c.onerror=function(){r(),"function"==typeof t&&t()}),c.charset="utf-8",c.type="text/javascript",c.async=!0,c.src=n,u.appendChild(c)},a=(e.lazyLoadScript=function(n){return o(function(e,t){r(n,e,t)})},e.jsonp=function(n){n=$.extend({url:"",data:{},jsonpCallback:"callback",cache:!1},n);var e=$.extend({},n.data),t=e[n.jsonpCallback]="jsonp_callback_"+Math.floor(1e10*Math.random());n.cache||(e._=Math.floor(1e10*Math.random()));var o=$.Deferred();window[t]=function(n){window[t]=null,o.resolve(n)};var a=n.url+(-1==n.url.indexOf("?")?"?":"&")+$.param(e);return r(a,function(){},function(){o.reject()}),o.promise()},e.debounce=function(n,e,t){var o=null,r=function(){o&&clearTimeout(o);var r=this,a=arguments;return t?(o||n.apply(r,a),o=setTimeout(function(){o=null},e)):o=setTimeout(function(){o=null,n.apply(r,a)},e),r};return r.cancel=function(){clearTimeout(o),o=null},r});e.throttle=function(n,e){function t(){a=arguments,u=this,r||(r=setTimeout(function(){r=null,n.apply(u,a),u=a=null},o?0:e),o&&(o=!1))}var o=!0,r=null,a=null,u=null;return t.cancel=function(){clearTimeout(r),r=u=a=null},t},e.loadImg=function(n,e,t,o){return n?(e=e||function(){},t=t||function(){},o=o||new Image,o.readyState?o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&(o.onreadystatechange=null,e(o))}:o.onload=function(){e(o)},o.onerror=function(){t(o)},o.src=n,o):void 0},e.DJBHash=function(n){if(n){var e,n=n+"",t=5381;if(n){for(var o=0,r=n.length;r>o;++o)t+=(t<<5)+n.charAt(o).charCodeAt();e=2147483647&t}return e}},e.importStyle=function(n,e){if(!document.getElementById(e)){var t=document.createElement("style");if(e&&(t.id=e),document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet){if(document.getElementsByTagName("style").length>31)throw new Error("Exceed the maximal count of style tags in IE");t.styleSheet.cssText+=n}else t.appendChild(document.createTextNode(n));return t}},e.exposure=function(n,e,t,o){if(n=$(n),n.length){e="function"==typeof e?e:function(){},t=t||0;var r,u=$(o?o:window),c=a(function(){r=n.offset(),r.top<=u.scrollTop()+u.height()+t&&(u.off("scroll",c),e(n))},60);u.on("scroll",c),c()}}}e.toRgb=function(n){var e="",t="";return $.isNumeric(n)&&("number"!=typeof n&&(n=parseInt(n,10)),n>=0&&(t=n.toString(16),e=("000000"+t).slice(t.length))),e.toUpperCase()},e.format=function(n){return $.isNumeric(n)?(n+"").replace(/(\d)(?=(\d{3})+$)/g,"$1,"):n};var u=e.createSingleElm=t(function(){return document.createElement("div")});e.supportsStyle=function(n,e){for(var t=u().style,o=["ms","O","Moz","webkit",""],r=o.length,a=n.replace(/^./,function(n){return n.toUpperCase()});r--;){var c=o[r]?o[r]+a:n;if(c in t)return e&&e(o[r],c),!0}return!1}});
;define("rafQue",function(n,e,t){function i(){function n(){null===t&&e.length>0&&(t=u(function(){e.shift()(),t=null,n()}))}var e=[];this.push=function(t){"function"==typeof t&&(e.push(t),n())};var t=null}var u=null,a=null;!function(n){u=n.requestAnimationFrame,a=n.requestAnimationFrame;for(var e=["webkit","moz","ms","o"],t=0;t<e.length&&!u;++t)u=n[e[t]+"RequestAnimationFrame"],a=n[e[t]+"CancelAnimationFrame"]||n[e[t]+"CancelRequestAnimationFrame"];var i=0;u||(u=function(e){var t=(new Date).getTime(),u=Math.max(0,16-(t-i)),a=n.setTimeout(function(){e(t+u)},u);return i=t+u,a}),a||(a=function(n){clearTimeout(n)})}(window),t.exports=new i});
;define("TTM",function(){return window.TT_META_DATA});
;define("tafPreListen",function(n,e,i){function t(n){var e=(n.param?n.param:n).lUid;e&&e==(f=null===f?HUYA_UTIL.getCookieVal("yyuid"):f)&&o.emit("myNobleEnter",n)}var r=n("Event"),a=n("TTP"),o=new r;a.isH5&&a.ready(function(n){for(var e=["10040","42008","getLinkMicPresenterListByUid","6201"],i=0,t=e.length;t>i;i++)!function(e){n.addTafListener(e,function(n){o.emit(e,n)})}(e[i])}),a.isH5?a.ready(function(n){n.addTafListener("6110",t)}):a.on("onNobleEnter",t);var f=null;i.exports=o});
;define("rankTab",function(){function e(e){if(i!==e){c.removeClass("active").eq(e).addClass("active"),d.hide().eq(e).show(),t.fire(i=e);try{ya.reportProductEvent({eid:"click/zhibo/rankTab/"+["trueLove","fans","vip"][i],eid_desc:"\u70b9\u51fb/\u76f4\u64ad/\u699c\u5355tab/"+["\u5468\u8d21","\u7c89\u4e1d","\u8d35\u5bbe"][i]})}catch(n){}}}function n(e){t.add(e)}function a(){return i}var i=0,t=new $.Callbacks,r=$("#J-weekRank"),c=r.find(".week-rank__btn"),d=r.find(".week-rank__unit");return c.on("click",function(n){n.preventDefault();var a=$(this).index();e(a)}),{go:e,change:n,getIndex:a}});
;define("hideshare",function(o){var e,r,d,t,l,s=o("tools"),i=s.once(function(){e=$("#J_roomHeader"),r=$("#J_roomTitle"),d=$(".J_roomHdCtrlOther"),t=r.width(),l=d.width()}),n=function(){i();var o=r.offset().left,s=d.offset().left+d.width();t+10+l>s-o?e.addClass("room-hd-small"):e.removeClass("room-hd-small")},a=s.debounce(n,60);a(),TT.on("resizeWide",a),TT.on("ROOM_HEADER_CTRL_RESIZE",function(){$("#J_roomHeader").removeClass("room-hd-small"),l=d.width(),n()})});
;define("msgManager",function(n){function t(n){null===c&&(c=document.createElement("ul")),c.innerHTML=n;for(var t=[],e=0,r=c.children.length;r>e;e++)t[e]=c.children[e];return t}var e=n("tools"),r=n("Event"),o=Array.prototype.map||function(n){for(var t=[],e=0,r=this.length;r>e;e++)t.push(n(this[e],e));return t},i=Array.prototype.indexOf||function(n){for(var t=0,e=this.length;e>t;t++)if(this[t]===n)return t;return-1},c=null,a=function(){},l=function(){function n(){return T++}function c(t,e,r){var o=-1;if(t&&"string"==typeof t)if(-1==t.indexOf("</li>")){o=n();var i={id:o,content:t,data:e,init:"function"==typeof r?r:a,elm:null};_.push(i),y.emit("add",i)}else TT.log('%cThe "content" can not contain tag "li"\uff01',"color:red");return o}function l(n){for(var t=0,e=x.length;e>t;t++)if(x[t].id==n)return x[t];return null}function u(n){var t=l(n);return t&&d(i.call(x,t),1),t}function f(){var n=0,t=document.createDocumentFragment();return{add:function(e){t.appendChild(e),++n>=300&&(t=document.createDocumentFragment(),n=0)}}}function d(n,t){var e=x.splice(n,t);if(e.length>0){null===M&&(M=new f);for(var r=0,o=e.length;o>r;r++)M.add(e[r].elm);y.emit("del",e)}return e}function m(n){n&&(_=[]),y.emit("cls",d(0,x.length),!!n)}function g(){w=!1}function h(){w=!0}function p(){var n=x.length-100,t=n>0;w&&t&&y.emit("gc",d(0,n))}function s(){if(!(_.length<=0)){for(var n=o.call(_,function(n){return'<li class="J_msg" data-id="'+n.id+'">'+n.content+"</li>"}),e=t(n.join("")),r=0,i=e.length;i>r;r++)_[r].elm=e[r],_[r].init(e[r],_[r]),C.appendChild(e[r]);var c=_;_=[],v(c,C,!0)}}function v(n,t,e){var r=[].concat(n);x=x.concat(r),y.emit("appendBefore",r,t,e),D.appendChild(t),p(),y.emit("nextTick",r),y.off("nextTick"),y.emit("msg",r)}var y=new r,T=0,_=[],x=[],M=null,w=!0,C=document.createDocumentFragment(),D=document.getElementById("chat-room__list");return y.on("add",e.throttle(s,200)),{createMid:n,container:D,parseHTML:t,gc_close:g,gc_open:h,append:v,add:c,get:l,remove:u,clear:m,size:function(){return x.length},on:y.on,one:y.one,off:y.off}};return new l});
;define("Emot",function(e){function t(e){$.extend(this,new a),this.faces=e,this.select=function(e){this.emit("select",e)},this.update=function(e){this.emit("update",this.faces=e)}}var a=e("Event"),l=e("tools"),k=[{key:"dx",alt:"[\u5927\u7b11]"},{key:"sh",alt:"[\u9001\u82b1]"},{key:"tx",alt:"[\u5077\u7b11]"},{key:"dk",alt:"[\u5927\u54ed]"},{key:"hh",alt:"[\u563f\u54c8]"},{key:"66",alt:"[666]"},{key:"gd",alt:"[\u611f\u52a8]"},{key:"yw",alt:"[\u7591\u95ee]"},{key:"xh",alt:"[\u559c\u6b22]"},{key:"jx",alt:"[\u5978\u7b11]"},{key:"zan",alt:"[\u8d5e]"},{key:"ka",alt:"[\u53ef\u7231]"},{key:"am",alt:"[\u50b2\u6162]"},{key:"kx",alt:"[\u5f00\u5fc3]"},{key:"88",alt:"[\u62dc\u62dc]"},{key:"hx",alt:"[\u5bb3\u7f9e]"},{key:"zs",alt:"[\u8870]"},{key:"pu",alt:"[\u5410\u8840]"},{key:"zc",alt:"[\u5634\u998b]"},{key:"sq",alt:"[\u751f\u6c14]"},{key:"fe",alt:"[\u6276\u989d]"},{key:"bz",alt:"[\u95ed\u5634]"},{key:"kw",alt:"[\u67af\u840e]"},{key:"xu",alt:"[\u5618]"},{key:"xk",alt:"[\u7b11\u54ed]"},{key:"lh",alt:"[\u6d41\u6c57]"},{key:"bk",alt:"[\u4e0d\u770b]"},{key:"hq",alt:"[\u54c8\u6b20]"},{key:"tp",alt:"[\u8c03\u76ae]"},{key:"gl",alt:"[\u9b3c\u8138]"},{key:"cl",alt:"[\u6233\u8138]"},{key:"dg",alt:"[\u5927\u54e5]"},{key:"kun",alt:"[\u56f0]"},{key:"yb",alt:"[\u62e5\u62b1]"},{key:"zt",alt:"[\u732a\u5934]"},{key:"kl",alt:"[\u9ab7\u9ac5]"},{key:"cc",alt:"[\u81ed\u81ed]"},{key:"xd",alt:"[\u5fc3\u52a8]"},{key:"dao",alt:"[\u5200]"}],y=[{key:"wx",alt:"[\u5fae\u7b11]"},{key:"ll",alt:"[\u6d41\u6cea]"},{key:"dy",alt:"[\u5f97\u610f]"},{key:"jy",alt:"[\u60ca\u8bb6]"},{key:"pz",alt:"[\u6487\u5634]"},{key:"yun",alt:"[\u6655]"},{key:"ng",alt:"[\u96be\u8fc7]"},{key:"se",alt:"[\u8272]"},{key:"cy",alt:"[\u62bd\u70df]"},{key:"qd",alt:"[\u6572\u6253]"},{key:"mg",alt:"[\u73ab\u7470]"},{key:"wen",alt:"[\u543b]"},{key:"xs",alt:"[\u5fc3\u788e]"},{key:"zd",alt:"[\u70b8\u5f39]"},{key:"sj",alt:"[\u7761\u89c9]"},{key:"hk",alt:"[\u5f88\u9177]"},{key:"by",alt:"[\u767d\u773c]"},{key:"ot",alt:"[\u5455\u5410]"},{key:"fd",alt:"[\u594b\u6597]"},{key:"kz",alt:"[\u53e3\u7f69]"},{key:"hp",alt:"[\u5bb3\u6015]"},{key:"dai",alt:"[\u53d1\u5446]"},{key:"fn",alt:"[\u53d1\u6012]"},{key:"ruo",alt:"[\u5f31]"},{key:"ws",alt:"[\u63e1\u624b]"},{key:"sl",alt:"[\u80dc\u5229]"},{key:"lw",alt:"[\u793c\u7269]"},{key:"sd",alt:"[\u95ea\u7535]"},{key:"gz",alt:"[\u9f13\u638c]"},{key:"qq",alt:"[\u4eb2\u4eb2]"},{key:"kb",alt:"[\u62a0\u9f3b]"},{key:"wq",alt:"[\u59d4\u5c48]"},{key:"yx",alt:"[\u9634\u9669]"},{key:"kel",alt:"[\u53ef\u601c]"},{key:"bs",alt:"[\u9119\u89c6]"},{key:"zk",alt:"[\u6293\u72c2]"},{key:"bq",alt:"[\u62b1\u62f3]"},{key:"ok",alt:"[OK]"}],n={},c={},r=[],i=[];$.each(k,function(e,t){t.code="/{"+t.key,t.img="//a.msstatic.com/huya/main/emot_png/"+t.key+".png",n[t.key]=t,r.push(t.key),i.push(t.alt)}),$.each(y,function(e,t){t.code="/{"+t.key,c[t.key]=t,r.push(t.key),i.push(t.alt)});var o=new RegExp("/{("+r.join("|")+")","g"),u=new RegExp(i.join("|").replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"g"),s=function(e,t){return("string"==typeof e?e:"").replace(o,function(e,a){var l=!!c[a];return t(e,n[a]||c[a],l)})},d=function(e){return s(e,function(e,t,a){return t?a?t.alt:'<img src="'+t.img+'" alt="'+t.alt+'" />':e})},h=function(e,t){return("string"==typeof e?e:"").replace(u,function(e){var a=null;return $.each(k.concat(y),function(t,l){return l.alt==e?(a=l,!1):void 0}),t(e,a)})},f=function(){function e(){var e=[],t=localStorage.getItem(k);if(t)try{e=$.parseJSON(t)}catch(a){}var l=[];return $.each(e,function(e,t){var a=n[t];a&&(l[e]=a)}),l}var t=new a,k="TT_ROOM_EMOT_HISTORY_2";return window.addEventListener&&window.addEventListener("storage",l.throttle(function(a){(null===a.newValue||a.key===k)&&t.emit("update",e())},200)),$.extend({},t,{add:function(a){var l=e();$.each(l,function(e,t){return a.code===t.code?(l.splice(e,1),!1):void 0}),l.unshift(a);var y=[];$.each(l,function(e,t){y.push(t.key)});var n='["'+y.join('","')+'"]';try{localStorage.setItem(k,n)}catch(c){}t.emit("update",e())},getData:e})}();return t.faces=k,t.faceMap=n,t.parse=s,t.replace=d,t.parseAlt=h,t.history=f,t});
;define("widget/fans-icon",function(n,e,a){function o(){return new $.Deferred(function(n){f.isH5?f.ready(function(e){var a=new HUYA.BadgeConfigInfoReq;a.tUserId=e.userId,e.sendWup2("revenueui","getBadgeConfigInfo",a,n.resolve)}):(f.one("BadgeConfigInfoRsp",function(e){n.resolve(e.param)}),f.ready(function(n){n.callAs("BadgeConfigInfoReq")}))})}function r(n,e){var a="";for(var o in n)if(n.hasOwnProperty(o))for(var r=40;r;)a+='.fans-icon[data-id="'+o+'"].fans-icon[data-type="'+e+'"].fans-icon-'+r+"{background: url("+TT.trimUrl(n[o]).replace("<ua>","3").replace("<level>",r)+") no-repeat;}",r--;return a}function t(n,e,a,o){return!$.isNumeric(n)||parseInt(n,10)<1||1!=o&&!e?"":'<span data-id="'+a+'" data-type="'+(1==o?"1":"0")+'" class="fans-icon fans-icon-'+n+'">'+(1!=o?e:"")+"</span>"}var i=n("tools"),f=n("TTP"),s=n("roomBeta");s.videoOnLoad(function(){o().done(function(n){var e="";e+=r(n.mPersonalBadgeLogo.value,0),e+=r(n.mFaithBadgeLogo.value,1),i.importStyle(e,"J_fansBadgeCustomStyle")})}),a.exports={create:t}});
;define("smog",function(e,a,s){var n,c=e("TTP"),t=e("TTR"),i=e("msgManager"),o=e("Emot"),d=e("widget/fans-icon"),l=new $.Deferred;t.isOn&&$.getJSON(TT.app.main+"cache1min.php",{m:"chatMessage",tid:t.id,sid:t.sid},function(e){function a(){var e=0==t?0:Math.ceil(1e3*Math.random())+500;n=setTimeout(function(){var e='<div class="msg-smog">'+d.create(s[t].badgeLevel,s[t].badgeName,s[t].badgeId,s[t].badgeType)+'<span class="name">'+_.escape(s[t].nick)+'</span><span class="colon">:</span><span class="msg">'+o.replace(_.escape(s[t].chat))+"</span></div>";i.add(e),t++,t<s.length&&a()},e)}if(e&&1e3==+e.status&&e.result.chats.length>0){var s=e.result.chats,t=0;c.isFlash&&c.ready(function(e){e.callAs("cacheMessage",s)}),a(),l.resolve()}}),s.exports={stop:function(){l.done(function(){clearTimeout(n)})}}});
;define("getCreatelayer",function(e){var a=e("tools"),n=e("roomBeta"),o=a.lazyPromise(function(a){e.async("widget/createLayer",function(){a(window.Createlayer)})});return n.onload(o),o});
;define("formatNumber",function(){function r(r,t){for(var e=r?r.toString().split("."):["0"],s=t?t.split("."):[""],a="",n=e[0],u=s[0],i=n.length-1,b=!1,f=u.length-1;f>=0;f--)switch(u.substr(f,1)){case"#":i>=0&&(a=n.substr(i--,1)+a);break;case"0":a=i>=0?n.substr(i--,1)+a:"0"+a;break;case",":b=!0,a=","+a}if(i>=0)if(b)for(var m=n.length;i>=0;i--)a=n.substr(i,1)+a,i>0&&(m-i)%3==0&&(a=","+a);else a=n.substr(0,i+1)+a;a+=".",n=e.length>1?e[1]:"",u=s.length>1?s[1]:"",i=0;for(var f=0;f<u.length;f++)switch(u.substr(f,1)){case"#":i<n.length&&(a+=n.substr(i++,1));break;case"0":a+=i<n.length?n.substr(i++,1):"0"}return a.replace(/^,+/,"").replace(/\.$/,"")}var t={isFormatNumber:!1,formatNumber:function(r){var t=Number(r);return t&&t>1e4?(t/1e4).toFixed(1)+"\u4e07":t},formatNumber2:r,fnFormat:function(r){if(!this.isFormatNumber){var t=r.find(".js-num"),e=this;t.each(function(r,t){var s=$.trim($(t).text());$(t).text(e.formatNumber(s))}),this.isFormatNumber=!0}}};return t});
;define("documentVisibility",function(n,e,i){var t,d;"undefined"!=typeof document.hidden?(t="hidden",d="visibilitychange"):"undefined"!=typeof document.msHidden?(t="msHidden",d="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(t="webkitHidden",d="webkitvisibilitychange"),i.exports={state:function(){return t?document[t]:!1},change:function(n){d&&"function"==typeof n&&$(document).on(d,function(){n(document[t])})}}});
;define("room_core",function(n){function o(n){var o="",e={showSafetyVerifyPopupBox:"showPopupBox",closeSafetyVerifyPopupBox:"closePopupBox",setUsedClientCAMark:"safetyVerifyFlashCallSetUsedClient",isUsedClientCAMark:"safetyVerifyFlashCallIsUsedClient",isRemClientCAMark:"safetyVerifyFlashCallIsRemClient"};if(n&&(o=e[n.jsKey])){if(window.safetyVerifyUtil)return safetyVerifyUtil[o](n);$.getScript("https://res.udb.duowan.com/ca/js/extra/sdk/pcweb.js",function(){$.getScript("//a.msstatic.com/huya/icenter/2.0/js/safety-verify.js",function(){return safetyVerifyUtil[o](n)})})}}var e=n("roomBeta"),t=n("TTP"),i=n("TTR"),a=(n("TTM"),n("TTA")),c=n("tools");n("tafPreListen");var u=HUYA_UTIL.getCookieVal("yyuid");e.videoOnLoad(function(){n.async("widget/treasureChest")}),e.videoOnLoad(function(){t.ready(function(){n.async("roomBlockWords",function(n){function o(){var o=[].concat(n.global.list).concat(n.local.list);t.call("blockWordsUpdate",o)}o(),n.global.on("ALL",o),n.local.on("ALL",o)})})}),document.getElementById("J-weekRank")&&e.videoOnLoad(function(){var o=n("rankTab");n.async("week_rank"),e.lazyLoad({executor:function(){n.async("fans_rank")},force:function(n){o.change(function(o){1==o&&n()})}}),i.isOn&&(n.async("roomVip",function(n){function o(n){n&&"number"==typeof n.total&&$(".J_rankTabVip").text(n.total>0?"\u8d35\u5bbe("+n.total+")":"\u8d35\u5bbe")}o(n.data),n.on("change",o)}),e.lazyLoad({executor:function(){n.async("widget/vipSeat")},force:function(n){o.change(function(o){2==o&&n()})}}))}),e.videoOnLoad(function(){var o="//api.huya.com/subscribe/getSubscribeStatus";$.ajax({url:o,data:{from_key:u,from_type:1,to_key:a.lp,to_type:2},dataType:"jsonp"}).done(function(o){0==o.result&&(u&&n.async("roomFollow",function(e){1==o.status?e._on():0==o.status&&e._off(),e.change(function(o){n.async("roomFans",function(n){n.update(n.count+(o?1:-1))})})}),n.async("roomFans",function(n){n.update(o.subscribe_count)}))})}),u?e.videoOnLoad(function(){n.async("widget/roomFollow")}):$("#yyliveRk_game_newsBut").on("click",function(n){n.preventDefault(),TT.login.login()}),e.videoOnLoad(function(){n.async("roomNotice"),n("hideshare")}),e.videoOnLoad(function(){n.async("widget/roomAnchorLv")}),NAV_UTIL.isLogin()||$(".no-login-tip").show(),e.videoOnLoad(function(){n.async("input_ob")}),e.videoOnLoad(function(){n.async("widget/fansbadge")}),e.videoOnLoad(function(){n.async("widget/roomEmot")}),e.lazyLoad({executor:function(o){n.async("noble",o)},force:function(n){$(".open-guizu").on("click",function(o){o.preventDefault(),n().done(function(n){n.open()})})},type:"VIDEO"}),e.videoOnLoad(function(){n.async("chatRoom")}),n("msgManager").add('<p style="color:#3c0; padding: 4px 9px;">\u7cfb\u7edf\u6d88\u606f\uff1a\u864e\u7259\u4f9d\u6cd5\u5bf9\u76f4\u64ad\u5185\u5bb9\u8fdb\u884c24\u5c0f\u65f6\u5de1\u67e5\uff0c\u7981\u6b62\u4f20\u64ad\u8fdd\u6cd5\u8fdd\u89c4\u3001\u5c01\u5efa\u8ff7\u4fe1\u3001\u66b4\u529b\u8840\u8165\u3001\u4f4e\u4fd7\u8272\u60c5\u3001\u62db\u5ad6\u8bc8\u9a97\u3001\u8fdd\u7981\u54c1\u7b49\u4e0d\u826f\u4fe1\u606f\uff0c\u575a\u51b3\u7ef4\u62a4\u9752\u5c11\u5e74\u7fa4\u4f53\u7cbe\u795e\u6587\u660e\u5065\u5eb7\u3002\u8bf7\u52ff\u8f7b\u4fe1\u5404\u7c7b\u62db\u8058\u5f81\u5a5a\u3001\u4ee3\u7ec3\u4ee3\u62bd\u3001\u5237\u94bb\u3001\u8d2d\u4e70\u793c\u5305\u7801\u3001\u6e38\u620f\u5e01\u3001\u7535\u5546\u8d29\u5356\u7b49\u5e7f\u544a\u4fe1\u606f\uff0c\u4ee5\u514d\u4e0a\u5f53\u53d7\u9a97\u3002</p>'),i.isOn&&n("smog"),e.videoOnLoad(function(){n.async("chat")}),e.videoOnLoad(function(){n.async("widget/roomMsgOfKing")}),e.lazyLoad({executor:function(o){n.async("widget/roomShare",o)},force:function(n){$("#share-entrance").one("mouseover",function(){n().done(function(n){$("#pop-box-share").removeClass("room-mod-loading"),new n})})}}),i.isOn&&e.lazyLoad({executor:function(o){n.async("widget/illegalReport",o)},force:function(n){$(".illegal-report").on("click",function(){NAV_UTIL.checkLogin(function(){n().done(function(n){n()})})})}}),e.lazyLoad({executor:function(o){n.async("widget/roomAppGuide",o)},force:function(n){$(".jump-to-phone").one("mouseenter",function(){n().done(function(n){$("#J_AppGuideBox").removeClass("room-mod-loading"),new n})})}}),e.videoOnLoad(function(){n.async("widget/game_promote")}),2==i.bussType&&document.addEventListener&&e.videoOnLoad(function(){n.async("widget/game_buy")});var s={godv:"https://m.hupu.com/pubg/huya/4amgodvzzz",gucun:"https://m.hupu.com/pubg/huya/4amgucun",aluka:"https://m.hupu.com/pubg/huya/4amaluka",captain:"https://m.hupu.com/pubg/huya/4amcpt"},r=!!s[a.host];r&&e.videoOnLoad(function(){var n=document.createElement("iframe");n.width="100%",n.height="340",n.frameborder="0",n.style.borderWidth="0",n.scrolling="no",n.src=s[a.host],$("#J_fourAmArena").css({display:"block",width:"100%",marginTop:23,borderRadius:5,overflow:"hidden"}).append(n)}),e.lazyLoad({executor:function(o){n.async("bindPhone",o)},force:function(n){t.on("bindPhone",function(){n().done(function(n){n().fail(function(n){"IGNORANCE"!==n&&alert("\u624b\u673a\u7ed1\u5b9a\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01("+n+")")})})})}}),e.lazyLoad({executor:function(n){var o="//www.huya.com/act/pc/1805match_kplqa/js/iframe_builder.js";c.getScript(o,n)},force:function(n){t.on("clickDanmuQuestion",function(){n().done(function(){window.PC_iframe_builder.run()})})}}),1===(1&i.liveCompatibleFlag)&&e.videoOnLoad(function(){n.async("videoScale")}),e.videoOnLoad(function(){n.async("gift")}),e.videoOnLoad(function(){n.async("userLevel",function(o){o.change(function(o){n.async("widget/userUpgradeTips",function(n){new n(o)})})})}),e.lazyLoad(function(){n.async("widget/dialog")}),e.lazyLoad({executor:function(o){n.async("widget/weekStar",o)},force:function(n){t.on("showWeekStarRank",function(){n().done(function(n){n()})})}}),e.lazyLoad({executor:function(o){n.async("guessReport",o)},force:function(n){t.on(t.isH5?"guessReport":"gameGuessReport",function(){n().done(function(n){n()})})}}),e.lazyLoad({executor:function(){},force:function(){t.on("clickMovieIcon",function(){n.async("widget/room-movie",function(n){n()})})}}),e.lazyLoad({executor:function(o){n.async("widget/room-onTVLottery",o)},force:function(n){t.on("clickTVIcon",function(){n().done(function(n){n()})})}}),e.lazyLoad({executor:function(o){TT.sudo(function(){n.async("widget/blackPearl",o)},!1)},force:function(n){var o=null,e=null;t.on("treasureHunt",function(){TT.sudo(function(){n().done(function(n){e=e||c.once(function(){t.ready(function(n){t.isH5?n.addTafListener("8001",function(){o&&o.close()}):t.on("liveStatusChange",function(n){var e=n.param?n.param.status:n.status;0==e&&o&&o.close()})})}),o?o.close():(o=new n,o.open(),o.on("close",function(){o.destory(),o=null}),e())})})})}}),e.lazyLoad({executor:function(o){n.async("widget/roomGetPrize",o)},force:function(n){t.isH5?t.ready(function(o){o.addTafListener("7054",function(o){n().done(function(n){n(o)})})}):t.on("showRaffleWinnerNotice",function(o){n().done(function(n){n(o.param)})})}}),e.lazyLoad({executor:function(o){n.async("widget/recharge",o)},force:function(n){t.on("webgamepaylayer",function(o){n().done(function(n){n(o.param?o.param:o)})}),TT.on("liveRoom_recharge",function(){n().done(function(n){n()})})}}),e.lazyLoad({executor:function(o){n.async("widget/getBadgeFaith",o)},force:function(n){function o(){TT.sudo(function(){n().done(function(n){n(a.lp)})})}t.on("clickBadgeFaith",o),TT.on("GET_BADGE_FAITH",o)}}),e.lazyLoad({executor:function(o){n.async("topUpPayment",o)},force:function(n){t.on("topUpPayment",function(o){n().done(function(n){n(o)})})}}),e.lazyLoad({executor:function(o){n.async("firstRecharge",o)},force:function(n){t.on("getFirstRecharge",function(o){n().done(function(n){n(o)})})}}),t.isH5&&(e.lazyLoad({executor:function(o){n.async("widget/roomReportMsg",o)},force:function(n){t.on("reportMessage",function(o){n().done(function(n){TT.sudo(function(){n(o.uid,o.nick,o.msg)})})})}}),e.lazyLoad({executor:function(o){n.async("widget/roomMute",o)},force:function(n){t.on("muteMessage",function(o){n().done(function(n){n(o.uid,o.nick,o.msg,0)})})}})),e.videoOnLoad(function(){n.async("watchHistory")});var d=n("getCreatelayer"),f=null;$(".open-souhu").on("click",function(){NAV_UTIL.checkLogin(function(){d(function(n){f?f.show():f=new n({title:"\u5b88\u62a4\u7cfb\u7edf",width:670,height:450,url:"//hd.huya.com/guardOpen/index.html?uid="+a.lp+"&type=2&channelId="+i.id+"&gameid="+i.gid,idDom:"souhuLayer",idMask:"souhuMask"})})})}),t.on("showSafetyVerifyPopupBox",o),t.on("closeSafetyVerifyPopupBox",o),t.on("setUsedClientCAMark",o),t.on("isUsedClientCAMark",o),t.on("isRemClientCAMark",o),t.on("webgamelivepay",function(n){if(window.pay_util)return pay_util.execute(n);var o=document.createElement("link");o.rel="stylesheet",o.href="https://res.duowan.com/pay/auth/web/style.css",document.getElementsByTagName("head")[0].appendChild(o),$.getScript("//res.duowan.com/pay/auth/js/auth.js",function(){var o="https://a.msstatic.com/huya/main/js/livepay_4c86cde.js";$.getScript(o,function(){return pay_util.execute(n)})})}),e.videoOnLoad(function(){n.async("roomShield",function(n){t.ready(function(){t.call("msgShieldCfg",n.cfg),n.on("change",function(){t.call("msgShieldCfg",n.cfg)})}),t.on("msgShieldCfgSet",function(o){var e=t.isH5?o:o.param;n.set(e.type,e.val)})})}),t.on("setGuid",function(n){var o=new Date;o.setTime(o.getTime()+2592e6),HUYA_UTIL.writeCookie("guid",n.param.guid,TT.domainForWriteCookie,"/",o)},!0),t.on("webgamelivelogin",NAV_UTIL.login),t.isFlash&&t.on("setFlashCookie",function(n){var o=new Date;o.setTime(o.getTime()+864e5),HUYA_UTIL.writeCookie(n.param.cookieKey,n.param.cookieVal,TT.domainForWriteCookie,"/",o)},!0),e.videoOnLoad(function(){function o(n){var o=n.param?n.param.data.total_count:n.data.total_count;if(o>0){var t=e.formatNumber2(o,"#,###");$("#live-count").html(t)}}var e=n("formatNumber");t.isH5?t.ready(function(n){n.addTafListener("8006",function(n){o({data:{total_count:n.iAttendeeCount}})})}):t.on("WebTotalCount",o)}),e.videoOnLoad(function(){n.async("roomFans",function(n){$("#activityCount").text(n.count),n.on("change",function(){$("#activityCount").text(n.count)})})}),e.videoOnLoad(function(){function n(n){var e=n.param?n.param:n;e.sLiveDesc&&(o||(o=$("#J_roomTitle")),o.text(e.sLiveDesc))}t.isH5?t.ready(function(o){o.addTafListener("8004",n)}):t.on("liveInfoChangedNotice",n);var o=null}),function(){function n(){$(".notice-live").show()}t.isH5?t.ready(function(o){o.addTafListener("9010",n)}):t.on("noticeLive",n)}(),t.on("liveStatusChange",function(n){var o=n.param?n.param.status:n.status;TT.emit("liveStatusChange",o)}),t.isFlash&&t.on("isUserOnLive",function(n){1==n.param.isLive&&$("#tipsOrchat").css("visibility","visible").html('<div class="live-tips"><i></i><p>\u4e3a\u4fdd\u969c\u60a8\u7684\u76f4\u64ad\u4e0d\u88ab\u4e2d\u65ad\uff0c\u60a8\u6682\u65f6\u4e0d\u80fd\u5728\u7f51\u9875\u4e0a\u8fdb\u884c\u7ade\u731c\uff0c\u9001\u793c\u548c\u53d1\u8a00(\u76f4\u5230\u60a8\u7ed3\u675f\u76f4\u64ad),\u6211\u4eec\u5c06\u5c3d\u5feb\u89e3\u51b3\u3002</p></div>')},!0),t.isFlash&&$(window).on("focus",function(){t.ready()&&t.call("changeTabTarget")}),t.ready(function(n){t.isFlash?t.on("getUserNovieTaskCompleteRsp",function(){TT.emit("userLevelTaskComplete")}):n.addTafListener("1000107",function(){TT.emit("userLevelTaskComplete")})}),e.videoOnLoad(function(){var o=n("documentVisibility");o.change(function(n){t.ready(function(){t.call("documentVisibilityChange",n)})})}),t.on("displayModeChange",function(n){var o=$("body");o.removeClass("mode-page-full mode-page-theater"),0==n||(1==n?o.addClass("mode-page-full"):3==n&&o.addClass("mode-page-theater"))}),e.videoOnLoad(function(){function n(){function n(){window.ya?t.call("tongjiReady",{sessionId:YA.session_id.get(),mid:YA.mid.get()}):setTimeout(n,1e3)}n()}t.isFlash&&t.on("flashTongJiInit",function(){t.ready(n)}),t.isH5&&t.ready(n)})});
;define("app/room_normal",function(o){var n=(o("TTP"),o("TTR")),i=o("TTA"),e=(o("tools"),o("roomBeta")),t=function(){var o=$(".room-sidebar"),n=$(".chat-room__bd"),i=100,e=130;return function(){n.height(o.height()-i-e)}}();DUYA_SUB.subscribe("resizeWide",HUYA_UTIL.throttle(t,60)),t(),o("room_core"),e.videoOnLoad(function(){o.async("widget/sidebar",function(o){new o({gid:n.gid})})}),e.videoOnLoad(function(){o.async("widget/room-chat-notice"),o.async("roomActivity"),o.async("widget/room-guide"),o.async("chatPanelFilter",function(o){o.on("update",function(){setTimeout(function(){var n=o.topPanel();$(".chat-wrap-panel").hide(),$("#wrap-"+n).fadeIn(100,function(){o.emit("update:lockAndClearBtn")})},100)}),o.emit("update")})}),e.videoOnLoad(function(){o.async("widget/room-youlike",function(o){new o})}),e.videoOnLoad(function(){o.async("widget/room-video")}),e.onload(function(){localStorage.getItem("wtfHyAd")||(o.async("widget/roomGgTop",function(e){e(i.lp,n.gid,"#J_roomGgTop",function(e){!e&&o.async("widget/roomGg0",function(o){o(i.lp,n.gid,"#J_roomBd")})})}),o.async("roomMakeMoney"),o.async("widget/roomGg1",function(o){o(i.lp,n.gid,"#J_roomGg1")}),o.async("widget/roomGg2",function(o){o(i.lp,n.gid,"#J_roomGg2")}))}),e.onload(function(){o.async("roomReport",function(o){o({roomType:0})})}),e.videoOnLoad(function(){o.async("roomStatistics",function(o){var i=null;n.isOn&&(i={eid:"pageview/zhibo",eid_desc:"pageview/\u76f4\u64ad\u95f4"}),n.isReplay&&(i={eid:"pageview/replay",eid_desc:"pageview/\u91cd\u64ad\u95f4"}),n.isOff&&(i={eid:"pageview/notzhibo",eid_desc:"pageview/\u975e\u76f4\u64ad\u95f4"}),o(i)})})});