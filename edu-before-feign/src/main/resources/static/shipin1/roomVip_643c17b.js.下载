define("roomVip",function(t,a,e){function i(){var t=$.extend(this,new n);t.data=null,t.update=function(a){a&&a.list&&"number"==typeof a.total&&t.emit("change",t.data=a)},t.fetchRemoteData=function(){return i.fetchApi(t.update)},t.listenChangeNotice=function(){o.isH5?o.ready(function(a){a.addTafListener("6210",function(a){t.update({list:a.vVipBarItem.value,total:a.iTotal,sBadgeName:a.sBadgeName,sVLogo:a.sVLogo})})}):o.on("vipBarListReflesh",function(a){if(a.param.data.lPid&&a.param.data.lPid!=u.lp)return!1;var e=a.param.data;t.update({list:e.vVipBarItem,total:e.iTotal,sBadgeName:e.sBadgeName,sVLogo:e.sVLogo})})},t.fetchRemoteData().always(function(){t.listenChangeNotice()})}var n=t("Event"),o=t("TTP"),s=t("TTR"),u=t("TTA");i.fetchApi=function(t){return $.ajax({url:TT.app.main+"cache1min.php",type:"GET",dataType:"json",data:{m:"VipBarList",tid:s.id,sid:s.sid},dataType:"json",success:function(a){var e=null;a&&1e3==a.status&&a.result&&(e={list:a.result.items||[],total:a.result.total,sBadgeName:a.result.sBadgeName,sVLogo:a.result.sVLogo}),t(e)}})},e.exports=new i});