define("guide",function(n,i,e){function t(n,i){for(var e=[],t=0;t<n.length;t++){var r=n[t],o={roomId:r.iRoomId,yy:r.lYYId,uid:r.lUid,tid:r.lChannelId,sid:r.lSubChannelId,headImg:r.sAvatarUrl,name:r.sNick,category:r.sGameName};i&&(o.isSubscribe=!!parseInt(i[r.lUid])),e.push(o)}return e}function r(n){var i=n.vLMPresenterInfos.value,e=n.mPid2SubscribeStatus.value;return{list:t(i,e)}}function o(n){f.isH5?f.ready(function(i){var e=new HUYA.IsPugcRoomReq;e.lUid=l.lp,e.tId=i.userId,i.sendWup2("presenterui","isPugcRoom",e,function(i){n&&n(i)})}):f.isFlash&&f.ready(function(){f.one("IsPugcRoomRsp",function(i){n&&n(i.param)}),f.call("IsPugcRoomReq",{})})}function s(){f.isH5?f.ready(function(n){var i=new HUYA.GetLinkMicPresenterInfoReq;i.lUid=l.lp,i.tId=n.userId,n.sendWup("liveui","getLinkMicPresenterListByUid",i)}):f.isFlash&&f.ready(function(){f.call("getLinkMicPresenterInfoReq",{})})}function u(n){function i(i){var e=i.param?i.param:i,t=r(e);n.set.anchorList(t.list),n.emit("update")}function e(){n.emit("notice:currentAnchor")}f.isH5?f.ready(function(n){var t=n;t.addTafListener("getLinkMicPresenterListByUid",function(n){i(n)}),t.addTafListener("1025801",function(n){e(n)})}):f.isFlash&&(f.on("getLinkMicPresenterListByUidRsp",function(n){i(n)}),f.on("PugcVipRedirectNotice",function(n){e(n)}))}function c(n){function i(i,e){var t=n.anchorList(),r=!1;for(var o in t){var s=t[o];if(s.uid==i){r=!0,s.isSubscribe=e;break}}r&&(n.set.anchorList(t),n.emit("update"))}v.on("add",function(n){i(n,!0)}),v.on("del",function(n){i(n,!1)})}function a(){var n=!1,i=[],e=$.extend(this,new d);e.isPUGC=function(){return n},e.anchorList=function(){return i},e.set={isPUGC:function(i){n=i},anchorList:function(n){i=n}}}var d=n("Event"),f=n("TTP"),l=n("TTA"),v=n("subscribeByTaf"),p=!1,I=null,h=a.prototype;h.initialize=function(){var n=this;u(n),TT.getUserInfo(function(i){p=i.isLogined,I=i,s(),c(n)})},h.isPUGCReq=function(n){var i=this;o(function(e){0!=e.iStat&&(i.set.isPUGC(!0),i.initialize(),n&&n(e))})},h.constructor=a;var m=new a;e.exports=m});