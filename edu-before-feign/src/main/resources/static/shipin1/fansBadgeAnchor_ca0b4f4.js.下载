define("widget/fansBadgeAnchor",function(require,exports,module){function getAnchorActInfo(n,t){TTP.isH5?TTP.ready(function(a){a.addTafListener("getPresenterActivity",function(n){t(n),a.removeTafListener("getPresenterActivity")});var e=new HUYA.PresenterActivityReq;e.tId=a.userId,e.lUid=n,a.sendWup("huyauserui","getPresenterActivity",e)}):(TTP.one("PresenterActivityRsp",function(n){t(n.param)}),TTP.ready(function(t){t.callAs("PresenterActivityReq",{lBadgeId:n})}))}function Anchor(n){importStyle();var t=$(tpl(n));return{view:t,close:function(){t.remove()}}}var tools=require("tools"),tpl=function(obj){{var __t,__p="";Array.prototype.join}with(obj||{}){if(__p+='<div class="fansBadgeAnchor">\n    <div class="fansBadgeAnchor-hd">\u5fbd\u7ae0\u4e3b\u64ad</div>\n    <div class="fansBadgeAnchor-bd">\n        ',window.IS_UNION)var href=TT.app.main+"union/"+TT.createRoomHost(tAct.tLive.sPrivateHost,tAct.tLive.iRoomId,tAct.tLive.lYYId)+"?promoter="+TT.promoter,target="_self";else var href=TT.app.main+TT.createRoomHost(tAct.tLive.sPrivateHost,tAct.tLive.iRoomId,tAct.tLive.lYYId),target="_blank";__p+='\n        <a class="fansBadgeAnchor-avatar" target="'+(null==(__t=target)?"":__t)+'" href="'+(null==(__t=href)?"":__t)+'">\n            <img src="'+(null==(__t=TT.trimUrl(tAct.sAvatar))?"":__t)+'" alt="\u4e3b\u64ad\u5934\u50cf" />\n            ',tAct.bLive&&(__p+="\n            <i>\u5728\u64ad</i>\n            "),__p+='\n        </a>\n        <div class="fansBadgeAnchor-cont">\n            <div class="fansBadgeAnchor-nick">\n                <a target="'+(null==(__t=target)?"":__t)+'" href="'+(null==(__t=href)?"":__t)+'" class="fansBadgeAnchor-name" title="'+(null==(__t=tAct.sNick)?"":_.escape(__t))+'">'+(null==(__t=tAct.sNick)?"":_.escape(__t))+'</a>\n            </div>\n            <div class="fansBadgeAnchor-tag">\n                ',tAct.tLive.sGameName&&(__p+="\n                <span>"+(null==(__t=tAct.tLive.sGameName)?"":__t)+"</span>\n                "),__p+='\n            </div>\n        </div>\n    </div>\n    <div class="fansBadgeAnchor-ft">\n        <p class="fansBadgeAnchor-fansNum">\u5fbd\u7ae0\u4eba\u6570: <em>'+(null==(__t=tAct.iFansNum<1e4?tAct.iFansNum:(tAct.iFansNum/1e4).toFixed(1)+"\u4e07")?"":__t)+'</em></p>\n        <p class="fansBadgeAnchor-fansDm">'+(null==(__t=tAct.sDiamondUrl?'<img src="'+TT.trimUrl(tAct.sDiamondUrl).replace(".png","_3.png")+'" />':"<i></i>")?"":__t)+"<span>\u94bb\u7c89: <em>"+(null==(__t=tAct.iDiamondFansNum)?"":__t)+"/"+(null==(__t=tAct.iDiamondFansQuota)?"":__t)+"</em></span></p>\n    </div>\n</div>"}return __p},importStyle=tools.once(function(){var n='.fansBadgeAnchor{position:relative;width:195px;padding:10px;border:1px solid #ececec;background:#fff;border-radius:3px;font-family:"Microsoft YaHei";word-wrap:normal}.fansBadgeAnchor:after{position:absolute;left:12px;top:-5px;width:12px;height:6px;content:"";background:url(https://a.msstatic.com/huya/main/widget/fansBadgeAnchor/arr_22ac791.png)}.fansBadgeAnchor-hd{color:#777}.fansBadgeAnchor-bd{margin-top:8px;zoom:1}.fansBadgeAnchor-bd:before,.fansBadgeAnchor-bd:after{display:table;content:""}.fansBadgeAnchor-bd:after{clear:both}.fansBadgeAnchor-ft{margin-top:5px;zoom:1}.fansBadgeAnchor-ft:before,.fansBadgeAnchor-ft:after{display:table;content:""}.fansBadgeAnchor-ft:after{clear:both}.fansBadgeAnchor-ft .fansBadgeAnchor-fansNum{float:left;color:#999}.fansBadgeAnchor-ft .fansBadgeAnchor-fansNum em{color:#666}.fansBadgeAnchor-ft .fansBadgeAnchor-fansDm{float:right;color:#999}.fansBadgeAnchor-ft .fansBadgeAnchor-fansDm i{float:left;display:inline-block;width:18px;height:16px;background:url(https://a.msstatic.com/huya/main/widget/fansBadgeAnchor/diamond_e746443.png?__sprite)}.fansBadgeAnchor-ft .fansBadgeAnchor-fansDm img{float:left}.fansBadgeAnchor-ft .fansBadgeAnchor-fansDm img+span{line-height:20px}.fansBadgeAnchor-ft .fansBadgeAnchor-fansDm span{float:left;line-height:16px;margin-left:2px}.fansBadgeAnchor-ft .fansBadgeAnchor-fansDm em{color:#666}.fansBadgeAnchor-avatar{float:left;position:relative;width:45px;height:45px;border-radius:5px;cursor:pointer}.fansBadgeAnchor-avatar img{width:45px;height:45px;border-radius:5px}.fansBadgeAnchor-avatar i{position:absolute;right:0;bottom:0;white-space:nowrap;padding:1px 5px 3px;line-height:1;background:#f80;color:#fff;border-radius:10px}.fansBadgeAnchor-cont{overflow:hidden;zoom:1;padding-left:9px}.fansBadgeAnchor-name{display:inline-block;max-width:8em;color:#666;font-size:14px;font-weight:700;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.fansBadgeAnchor-name:hover{text-decoration:none;color:#333}.fansBadgeAnchor-tag{zoom:1;height:18px;overflow:hidden}.fansBadgeAnchor-tag:before,.fansBadgeAnchor-tag:after{display:table;content:""}.fansBadgeAnchor-tag:after{clear:both}.fansBadgeAnchor-tag span{float:left;border:1px solid #f80;padding:0 5px;color:#f80;margin-right:5px;height:16px;line-height:16px;border-radius:8px;max-width:10.2em;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}';tools.importStyle(n,"J_roomFansBadgeAnchorStyle")}),cache={};return function(n){var t=n.uid;t&&(n.init="function"==typeof n.init?n.init:function(){},n.maxAge="number"==typeof n.maxAge?n.maxAge:12e4,cache[t]?n.init(Anchor(cache[t])):getAnchorActInfo(t,function(a){n.maxAge&&(cache[t]=a,setTimeout(function(){cache[t]=null},n.maxAge)),n.init(Anchor(a))}))}});